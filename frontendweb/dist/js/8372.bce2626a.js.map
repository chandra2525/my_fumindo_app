{"version":3,"file":"js/8372.bce2626a.js","mappings":"wLAEIA,MAAM,aACNC,GAAG,gBACHC,SAAS,KACT,kBAAgB,0BAChB,cAAY,Q,GAEPF,MAAM,gB,GACJA,MAAM,iB,GACJA,MAAM,gB,GACLA,MAAM,cAAcC,GAAG,2B,GAGxBD,MAAM,c,EAdnB,c,0CACEG,EAAAA,EAAAA,IAqBM,MArBNC,EAqBM,EAdJC,EAAAA,EAAAA,IAaM,MAbNC,EAaM,EAZJD,EAAAA,EAAAA,IAWM,MAXNE,EAWM,EAVJF,EAAAA,EAAAA,IAGM,MAHNG,EAGM,EAFJH,EAAAA,EAAAA,IAAqG,KAArGI,GAAqGC,EAAAA,EAAAA,IAAnC,IAATC,EAAAC,MAAc,eAAiBD,EAAAC,OAAK,gBAC7FP,EAAAA,EAAAA,IAA4F,UAApFQ,KAAK,SAASb,MAAM,YAAY,kBAAgB,QAAQ,aAAW,S,aAE7EK,EAAAA,EAAAA,IAEM,MAFNS,EAEM,EADJT,EAAAA,EAAAA,IAAwB,KAArBU,UAAQJ,EAAAK,SAAO,OAf5BC,KAAA,aAiBQZ,EAAAA,EAAAA,IAEM,OAFDL,MAAM,gBAAc,EACvBK,EAAAA,EAAAA,IAAsF,UAA9EQ,KAAK,SAASb,MAAM,oBAAoB,kBAAgB,SAAQ,WAAK,S,CAQvF,OACEkB,KAAM,eACNC,MAAO,CACLP,MAAO,CACLC,KAAMO,OACNC,UAAU,GAEZL,QAAS,CACPH,KAAMO,OACNC,UAAU,K,WC9BhB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O,61CCmOA,MAAMC,GAAeC,EAAAA,EAAAA,IAAI,IACnBC,GAAeD,EAAAA,EAAAA,IAAI,IACnBE,EAAQC,aAAaC,QAAQ,gBAC7BC,GAAWL,EAAAA,EAAAA,IAAI,IACfM,GAAiBN,EAAAA,EAAAA,IAAI,IACrBO,GAAeP,EAAAA,EAAAA,IAAI,IAEnBQ,GAAcR,EAAAA,EAAAA,IAAI,GAClBS,GAAaT,EAAAA,EAAAA,IAAI,GACjBU,GAAWV,EAAAA,EAAAA,IAAI,IACfW,GAAYX,EAAAA,EAAAA,IAAI,GAGhBY,EAAc,CAClB,CAAEzB,MAAO,KAAM0B,KAAM,UAAWC,UAAU,GAC1C,CAAE3B,MAAO,YAAa0B,KAAM,YAAaC,UAAU,GACnD,CAAE3B,MAAO,OAAQ0B,KAAM,UAAWC,UAAU,KAI9CC,EAAAA,EAAAA,KAAUC,gBACFC,IAAe,IAGvB,MAAMC,GAAclB,EAAAA,EAAAA,IAAI,CAAEmB,OAAQ,UAAWC,MAAO,SAE9CC,EAASA,EAAGF,SAAQC,YACxBF,EAAYI,MAAQ,CAAEH,SAAQC,SAC9BH,IAAe,EAIXA,GAAgBD,UACpB,IACE,MAAMO,QAAiBC,EAAAA,EAAMC,IAAI,uCAAwC,CACvEC,QAAS,CACPC,cAAe,UAAUzB,KAE3B0B,OAAQ,CACNC,UAAWvB,EAAegB,MAC1BQ,OAAQvB,EAAae,MACrBS,SAAUb,EAAYI,MAAMH,OAC5Ba,gBAAiBd,EAAYI,MAAMF,MACnCa,KAAMzB,EAAYc,MAClBZ,SAAUA,EAASY,SAGvBjB,EAASiB,MAAQC,EAASV,KAAKqB,KAC/BvB,EAAUW,MAAQC,EAASV,KAAKsB,GAAGC,SACnC3B,EAAWa,MAAQe,KAAKC,KAAKf,EAASV,KAAKsB,GAAGC,SAAW1B,EAASY,MACpE,CAAE,MAAOiB,GACPC,QAAQD,MAAM,4BAA6BA,GAC3CE,IACF,GAIIC,GAAcT,IACdA,GAAQ,GAAKA,GAAQxB,EAAWa,QAClCd,EAAYc,MAAQW,EACpBhB,KACF,EAGI0B,IAAa3C,EAAAA,EAAAA,KAAI,GAEjB4C,IAAW5C,EAAAA,EAAAA,IAAI,CACnB6C,QAAS,KACThB,UAAW,KAIPiB,GAAYA,KAChBF,GAAStB,MAAQ,CACfuB,QAAS,KACThB,UAAW,GACZ,EAGGkB,GAAiB/B,UACrB,IACE,MAAMO,QAAiBC,EAAAA,EAAMC,IAAI,8CAA+C,CAC9EC,QAAS,CACPC,cAAe,UAAUzB,KAE3B0B,OAAQ,CACNC,UAAWvB,EAAegB,MAC1BQ,OAAQvB,EAAae,MACrBS,SAAUb,EAAYI,MAAMH,OAC5Ba,gBAAiBd,EAAYI,MAAMF,OAErC4B,aAAc,SAIVC,EAAMC,OAAOC,IAAIC,gBAAgB,IAAIC,KAAK,CAAC9B,EAASV,QAGpDyC,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAOR,EACZK,EAAKI,aAAa,WAAY,kBAC9BH,SAASI,KAAKC,YAAYN,GAC1BA,EAAKO,QAGLP,EAAKQ,WAAWC,YAAYT,EAC9B,CAAE,MAAOf,GACPC,QAAQD,MAAM,wBAAyBA,GAEvCxC,EAAauB,MAAQ,eACrBrB,EAAaqB,MAAQ,4CACrB,MAAM0C,EAAQ,IAAIC,EAAAA,GAAeV,SAASW,eAAe,kBACzDF,EAAMG,MACR,GAGIC,GAAqBpD,UACzB,MAAMqD,EAAYd,SAASW,eAAe,eACpCI,EAAOD,EAAUE,MAAM,GAE7B,IAAKD,EAAM,CACTvE,EAAauB,MAAQ,aACrBrB,EAAaqB,MAAQ,yCACrB,MAAM0C,EAAQ,IAAIC,EAAAA,GAAeV,SAASW,eAAe,kBAEzD,YADAF,EAAMG,MAER,CAEA,MAAMK,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQJ,GAExB,IACE,MAAM/C,QAAiBC,EAAAA,EAAMmD,KAAK,mDAAoDH,EAAU,CAC9F9C,QAAS,CACPC,cAAe,UAAUzB,IACzB,eAAgB,yBAGpBH,EAAauB,MAAQ,WACrBrB,EAAaqB,MAAQ,oBAAoBC,EAASV,KAAK+D,4CACvD,MAAMZ,EAAQ,IAAIC,EAAAA,GAAeV,SAASW,eAAe,kBACzDF,EAAMG,OAENlD,IACF,CAAE,MAAOsB,GACPC,QAAQD,MAAM,yBAA0BA,GACxCxC,EAAauB,MAAQ,eACrBrB,EAAaqB,MAAQ,qDACrB,MAAM0C,EAAQ,IAAIC,EAAAA,GAAeV,SAASW,eAAe,kBACzDF,EAAMG,MACR,GAGIU,GAA2B7D,UAC/B,IACE,MAAMO,QAAiBC,EAAAA,EAAMC,IAAI,iDAAkD,CACjFC,QAAS,CACPC,cAAe,UAAUzB,KAE3B8C,aAAc,SAIVC,EAAMC,OAAOC,IAAIC,gBAAgB,IAAIC,KAAK,CAAC9B,EAASV,QAGpDyC,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAOR,EACZK,EAAKI,aAAa,WAAY,2BAC9BH,SAASI,KAAKC,YAAYN,GAC1BA,EAAKO,QAGLP,EAAKQ,WAAWC,YAAYT,EAC9B,CAAE,MAAOf,GACPC,QAAQD,MAAM,8BAA+BA,GAE7CxC,EAAauB,MAAQ,iBACrBrB,EAAaqB,MAAQ,iDACrB,MAAM0C,EAAQ,IAAIC,EAAAA,GAAeV,SAASW,eAAe,kBACzDF,EAAMG,MACR,GAIIW,GAAeA,KACnBhC,KACAH,GAAWrB,OAAQ,CAAK,EAIpByD,GAAiBC,IACrBC,GAAa3D,MAAQ0D,EACrBpC,GAAStB,MAAQ,IAAK0D,GACtBrC,GAAWrB,OAAQ,CAAI,EAInB4D,GAAalE,UACjBwB,QAAQ2C,IAAI,uBAAwBvC,GAAStB,OAC7C,IACE,GAAIqB,GAAWrB,MAAO,CAEpB,MAAMC,QAAiBC,EAAAA,EAAM4D,IAAI,wCAAwCxC,GAAStB,MAAMuB,UAAWD,GAAStB,MAAO,CACjHI,QAAS,CACPC,cAAe,UAAUzB,OAG7BsC,QAAQ2C,IAAI,0BAA2B5D,EAASV,MAGhD,MAAMwE,EAAQhF,EAASiB,MAAMgE,WAAUC,GAAaA,EAAU1C,UAAYD,GAAStB,MAAMuB,WAC1E,IAAXwC,IACFhF,EAASiB,MAAM+D,GAAS,IAAKzC,GAAStB,OAE1C,KAAO,CAEL,MAAMC,QAAiBC,EAAAA,EAAMmD,KAAK,uCAAwC/B,GAAStB,MAAO,CACxFI,QAAS,CACPC,cAAe,UAAUzB,OAG7BsC,QAAQ2C,IAAI,6BAA8B5D,EAASV,MAGnDR,EAASiB,MAAMkE,KAAKjE,EAASV,MAC7BI,IACF,CACF,CAAE,MAAOsB,GACPC,QAAQD,MAAM,yBAA0BA,GACxCE,IAEF,GAIIwC,IAAejF,EAAAA,EAAAA,IAAI,MAGnByF,GAAmBT,IACvBC,GAAa3D,MAAQ0D,CAAO,EAGxBU,GAAgB1E,UACpB,IACEwB,QAAQ2C,IAAI,cAAeF,GAAa3D,MAAMuB,eACxCrB,EAAAA,EAAMmE,OAAO,wCAAwCV,GAAa3D,MAAMuB,UAAW,CACvFnB,QAAS,CACPC,cAAe,UAAUzB,OAI7BH,EAAauB,MAAQ,iBACrBrB,EAAaqB,MAAQ,qBAAqB2D,GAAa3D,MAAMO,uCAC7D,MAAMmC,EAAQ,IAAIC,EAAAA,GAAeV,SAASW,eAAe,kBACzDF,EAAMG,OACNlD,IACF,CAAE,MAAOsB,GACPC,QAAQD,MAAM,8BAA+BA,GAC7CE,IACF,GAIIA,GAAkBA,KAEtB1C,EAAauB,MAAQ,gBACrBrB,EAAaqB,MAAQ,6BACrB,MAAM0C,EAAQ,IAAIC,EAAAA,GAAeV,SAASW,eAAe,kBACzDF,EAAMG,MAAM,E,86KCjfd,MAAMtE,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://hopeui-vue/./src/components/ModalAlert.vue","webpack://hopeui-vue/./src/components/ModalAlert.vue?e3ce","webpack://hopeui-vue/./src/views/tables/ListUnit.vue","webpack://hopeui-vue/./src/views/tables/ListUnit.vue?4e8e"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"message-alert\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"deleteConfirmationLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"deleteConfirmationLabel\"> {{ title == '' ? 'Alert Dialog' : title }}</h5>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p v-html=\"message\"></p>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Tutup</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"MessageModal\", // Nama komponen yang lebih spesifik\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n    message: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ModalAlert.vue?vue&type=template&id=616d326c\"\nimport script from \"./ModalAlert.vue?vue&type=script&lang=js\"\nexport * from \"./ModalAlert.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-sm-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header d-flex justify-content-between\">\r\n          <div class=\"header-title\">\r\n            <h4 class=\"card-title\">List Satuan</h4>\r\n          </div> \r\n          <div >\r\n            <button \r\n              class=\"btn btn-success\" \r\n              style=\"margin-right: 10px;\" \r\n              @click=\"showAddModal\" \r\n              data-bs-toggle=\"modal\" \r\n              data-bs-target=\"#form-confirmation\">\r\n              Tambah Unit\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-success\" \r\n              style=\"margin-right: 10px;\" \r\n              @click=\"exportUnitData\">\r\n              Ekspor Data\r\n            </button>\r\n            <button\r\n              class=\"btn btn-info\"\r\n              style=\"margin-right: 10px;\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#mass-upload-modal\">\r\n              Mass Upload\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-info\" \r\n              @click=\"downloadTemplateUnitData\">\r\n              Download Template\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row mb-2\">\r\n             \r\n            <div class=\"col-sm-6\">\r\n            <!-- <b-col md=\"4\"> -->\r\n              <label for=\"validationCustomUsername01\" class=\"form-label\">Filter nama unit</label>\r\n              <div class=\"input-group has-validation\">\r\n                <input type=\"text\" v-model=\"filterUnitName\" class=\"form-control filter-style\" id=\"validationCustomUsername01\" aria-describedby=\"inputGroupPrepend\"/>\r\n              </div>\r\n            <!-- </b-col> -->\r\n            </div>\r\n            <div class=\"col-sm-4\">\r\n              <label for=\"validationCustomUsername01\" class=\"form-label text-white\">I</label>\r\n              <div class=\"input-group has-validation\">\r\n                <button\r\n                  class=\"btn btn-primary width-button-style filter-style\" \r\n                  @click=\"fetchUnitData\"\r\n                  title=\"Search\">\r\n                  Filter\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"row mb-2\">\r\n            <!-- Dropdown Show Entries -->\r\n            <div class=\"col-sm-6 pagination-show-entries\">\r\n              <label for=\"entries\" class=\"form-label col-sm-3\">Show entries</label>\r\n              <select\r\n                id=\"entries\"\r\n                class=\"form-select show-entries\"\r\n                v-model=\"pageSize\"\r\n                @change=\"fetchUnitData\"\r\n              >\r\n                <option value=\"10\">10</option>\r\n                <option value=\"25\">25</option>\r\n                <option value=\"50\">50</option>\r\n                <option value=\"100\">100</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"table-responsive border-bottom\">\r\n            <data-table\r\n              :data=\"unitData\"\r\n              :columns=\"unitColumns\" \r\n              :idrow=\"unit_id\"  \r\n              @edit=\"showEditModal\"\r\n              @delete=\"showDeleteModal\"\r\n              @sort=\"onSort\"\r\n            />\r\n\r\n            <div class=\"pagination-container\">\r\n              <p class=\"text-muted\">\r\n                Showing {{ (currentPage - 1) * pageSize + 1 }} to\r\n                {{ Math.min(currentPage * pageSize, totalData) }} of {{ totalData }} entries\r\n              </p>\r\n              <nav aria-label=\"Page navigation example\">\r\n                <ul class=\"pagination justify-content-end\">\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage - 1)\">Previous</button>\r\n                  </li>\r\n                  <li\r\n                    class=\"page-item\"\r\n                    v-for=\"page in totalPages\"\r\n                    :key=\"page\"\r\n                    :class=\"{ active: currentPage === page }\"\r\n                  >\r\n                    <button class=\"page-link\" @click=\"changePage(page)\">{{ page }}</button>\r\n                  </li>\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage + 1)\">Next</button>\r\n                  </li>\r\n                </ul>\r\n              </nav>\r\n            </div>\r\n            \r\n            <div class=\"modal fade\" id=\"form-confirmation\" data-bs-backdrop=\"static\" data-bs-keyboard=\"true\" tabindex=\"-1\" aria-labelledby=\"staticBackdropPermissionLabel\" aria-hidden=\"true\" @hide=\"resetForm\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"staticBackdropPermissionLabel\">{{ isEditMode ? 'Perbarui Unit' : 'Tambah Unit' }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <p>Form yang bertanda <span class=\"text-primary\">*</span> wajib diisi</p> \r\n                    <form @submit.prevent=\"submitUnit\">\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"unit_name\" class=\"form-label\">Nama Unit<span class=\"text-primary\">*</span></label>\r\n                        <input v-model=\"editForm.unit_name\" maxlength=\"100\" id=\"unit_name\" type=\"text\" required class=\"form-control\"/>\r\n                      </div>\r\n                       \r\n                      <button type=\"submit\" class=\"btn btn-primary\" :data-bs-dismiss=\"editForm.unit_name ? 'modal' : null\">{{ isEditMode ? 'Simpan Perubahan' : 'Tambahkan Unit' }}</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal Konfirmasi Penghapusan -->\r\n            <div class=\"modal fade\" id=\"delete-confirmation\" tabindex=\"-1\" aria-labelledby=\"deleteConfirmationLabel\" aria-hidden=\"true\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"deleteConfirmationLabel\">Konfirmasi Hapus</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <p>Apa kamu yakin ingin menghapus data Unit <strong>{{ selectedUnit?.unit_name }}</strong>?</p>\r\n                  </div>\r\n                  <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"confirmDelete\">Delete</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal for Mass Upload -->\r\n            <div\r\n              class=\"modal fade\"\r\n              id=\"mass-upload-modal\"\r\n              tabindex=\"-1\"\r\n              aria-labelledby=\"massUploadModalLabel\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"massUploadModalLabel\">Mass Upload Unit</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <form @submit.prevent=\"uploadFileUnitData\">\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"upload-file\" class=\"form-label\">Pilih File</label>\r\n                        <input\r\n                          type=\"file\"\r\n                          id=\"upload-file\"\r\n                          ref=\"fileInput\"\r\n                          accept=\".xlsx, .csv\"\r\n                          required\r\n                          class=\"form-control\"\r\n                        />\r\n                      </div>\r\n                      <button type=\"submit\" class=\"btn btn-primary\">Upload</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal Berhasil  Hapus  -->\r\n            <MessageModal :message=\"alertMessage\" :title=\"titleMessage\"/>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n  .filter-style {\r\n    height: 35px;\r\n  }\r\n\r\n  .show-entries {\r\n    width: 95px;\r\n  }\r\n\r\n  .width-button-style {\r\n    width: 85px;\r\n    font-size: 13px;\r\n  }\r\n\r\n  .pagination-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n\r\n  .pagination-show-entries {\r\n    display: flex; \r\n    align-items: center;\r\n  }\r\n\r\n</style>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport DataTable from '@/components/DataTable.vue';\r\nimport MessageModal from '@/components/ModalAlert.vue'; \r\nimport { Modal as BootstrapModal } from 'bootstrap';\r\n// import 'vue-select/dist/vue-select.css';\r\n\r\n// const router = useRouter();  \r\nconst titleMessage = ref('');\r\nconst alertMessage = ref('');\r\nconst token = localStorage.getItem('access_token'); \r\nconst unitData = ref([]);  \r\nconst filterUnitName = ref('');\r\nconst globalSearch = ref('');\r\n\r\nconst currentPage = ref(1); // Halaman aktif\r\nconst totalPages = ref(0); // Total halaman\r\nconst pageSize = ref(10); // Banyaknya data per halaman\r\nconst totalData = ref(0); // Jumlah total data dari API\r\n\r\n// Definisikan kolom untuk DataTable, gunakan komponen Actions untuk kolom tindakan\r\nconst unitColumns = [\r\n  { title: 'ID', data: 'unit_id', sortable: true },\r\n  { title: 'Nama Unit', data: 'unit_name', sortable: true }, \r\n  { title: 'Aksi', data: 'actions', sortable: false },\r\n];\r\n\r\n// Mengambil data tool unit saat komponen dimuat\r\nonMounted(async () => { \r\n  await fetchUnitData();\r\n});\r\n\r\nconst currentSort = ref({ column: 'unit_id', order: 'DESC' });\r\n\r\nconst onSort = ({ column, order }) => {\r\n  currentSort.value = { column, order };\r\n  fetchUnitData(); // Panggil ulang API dengan parameter sorting\r\n};\r\n\r\n// Fungsi untuk mengambil data tool unit dari backend\r\nconst fetchUnitData = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/asset_unit', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {  \r\n        unit_name: filterUnitName.value,\r\n        search: globalSearch.value,\r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n        page: currentPage.value, // Kirim nomor halaman\r\n        pageSize: pageSize.value, // Kirim ukuran data per halaman \r\n       }, \r\n    });\r\n    unitData.value = response.data.rows;// Asumsikan response berupa { data, total }\r\n    totalData.value = response.data.sp.rowCount;\r\n    totalPages.value = Math.ceil(response.data.sp.rowCount / pageSize.value);\r\n  } catch (error) {\r\n    console.error('Error fetching unit data:', error); \r\n    handleAuthError();\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengganti halaman\r\nconst changePage = (page) => {\r\n  if (page >= 1 && page <= totalPages.value) {\r\n    currentPage.value = page;\r\n    fetchUnitData(); // Refresh data untuk halaman baru\r\n  }\r\n};\r\n\r\nconst isEditMode = ref(false)\r\n\r\nconst editForm = ref({\r\n  unit_id: null, \r\n  unit_name: '', \r\n})\r\n\r\n// Fungsi untuk reset form saat modal ditutup\r\nconst resetForm = () => {\r\n  editForm.value = {\r\n    unit_id: null, \r\n    unit_name: '', \r\n  }\r\n}\r\n\r\nconst exportUnitData = async () => {\r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/asset_unit/export\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {  \r\n        unit_name: filterUnitName.value,\r\n        search: globalSearch.value,\r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n       },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"data_unit.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error exporting data:\", error);\r\n    // alert(\"Gagal mengekspor data. Silakan coba lagi.\");\r\n    titleMessage.value = `Gagal Ekspor`;\r\n    alertMessage.value = `Gagal mengekspor data. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst uploadFileUnitData = async () => {\r\n  const fileInput = document.getElementById('upload-file');\r\n  const file = fileInput.files[0];\r\n\r\n  if (!file) {\r\n    titleMessage.value = `Pilih File`;\r\n    alertMessage.value = 'Silakan pilih file sebelum mengunggah.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  try {\r\n    const response = await axios.post('http://localhost:3000/api/asset_unit/mass-upload', formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n    titleMessage.value = `Berhasil`;\r\n    alertMessage.value = `Upload berhasil, ${response.data.successCount} data unit berhasil terupload`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n \r\n    fetchUnitData();\r\n  } catch (error) {\r\n    console.error('Gagal mengunggah file:', error);\r\n    titleMessage.value = `Gagal Upload`;\r\n    alertMessage.value = 'Gagal mengunggah file. Pastikan format file benar.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst downloadTemplateUnitData = async () => { \r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/asset_unit/template/\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"template_data_unit.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error downloading template:\", error);\r\n    // alert(\"Gagal mendownload template. Silakan coba lagi.\");\r\n    titleMessage.value = `Gagal Download`;\r\n    alertMessage.value = `Gagal mendownload template. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n}\r\n\r\n// Fungsi untuk membuka modal tambah dengan form kosong\r\nconst showAddModal = () => {\r\n  resetForm() // Kosongkan form\r\n  isEditMode.value = false \r\n}\r\n\r\n// Fungsi untuk membuka modal edit dan mengisi form dengan data yang dipilih\r\nconst showEditModal = (rowData) => {\r\n  selectedUnit.value = rowData\r\n  editForm.value = { ...rowData }\r\n  isEditMode.value = true\r\n}\r\n\r\n// Fungsi untuk submit tambah/edit\r\nconst submitUnit = async () => {\r\n  console.log('Edit data submitted:', editForm.value)\r\n  try {\r\n    if (isEditMode.value) {\r\n      // Update data jika dalam mode edit\r\n      const response = await axios.put(`http://localhost:3000/api/asset_unit/${editForm.value.unit_id}`, editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil diupdate:', response.data)\r\n\r\n      // Perbarui data unitData di tabel setelah update\r\n      const index = unitData.value.findIndex(assetUnit => assetUnit.unit_id === editForm.value.unit_id)\r\n      if (index !== -1) {\r\n        unitData.value[index] = { ...editForm.value }\r\n      }\r\n    } else {\r\n      // Tambahkan data baru jika dalam mode tambah\r\n      const response = await axios.post('http://localhost:3000/api/asset_unit', editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil ditambahkan:', response.data)\r\n\r\n      // Tambahkan data baru ke tabel\r\n      unitData.value.push(response.data)\r\n      fetchUnitData()\r\n    } \r\n  } catch (error) {\r\n    console.error('Gagal mengupdate data:', error);\r\n    handleAuthError();\r\n    // this.$router.push('/auth/login'); // Redirect ke halaman login\r\n  }\r\n}\r\n\r\n\r\nconst selectedUnit = ref(null) // Menyimpan data yang dipilih untuk dihapus\r\n\r\n// Fungsi untuk menampilkan modal konfirmasi penghapusan\r\nconst showDeleteModal = (rowData) => {\r\n  selectedUnit.value = rowData\r\n}\r\n\r\nconst confirmDelete = async () => {\r\n  try {\r\n    console.log('Id deleted:', selectedUnit.value.unit_id)\r\n    await axios.delete(`http://localhost:3000/api/asset_unit/${selectedUnit.value.unit_id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n    // alert('Data Unit ' + selectedUnit.value.unit_name + ' bertasil dihapus.') \r\n    titleMessage.value = `Berhasil Hapus`;\r\n    alertMessage.value = `Data Unit <strong>${selectedUnit.value.unit_name}</strong> berhasil dihapus.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show(); \r\n    fetchUnitData()\r\n  } catch (error) {\r\n    console.error('Failed to delete unit data:', error) \r\n    handleAuthError();\r\n  }\r\n}\r\n\r\n// Fungsi untuk menangani kesalahan autentikasi\r\nconst handleAuthError = () => {\r\n  // router.push({ name: 'auth.login' });\r\n  titleMessage.value = `Koneksi Gagal`;\r\n  alertMessage.value = `Cek koneksi internet Anda.`;\r\n  const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n  modal.show();\r\n};\r\n \r\n</script>\r\n","import script from \"./ListUnit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListUnit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListUnit.vue?vue&type=style&index=0&id=7410f9ee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7410f9ee\"]])\n\nexport default __exports__"],"names":["class","id","tabindex","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","$props","title","type","_hoisted_6","innerHTML","message","_hoisted_7","name","props","String","required","__exports__","render","titleMessage","ref","alertMessage","token","localStorage","getItem","unitData","filterUnitName","globalSearch","currentPage","totalPages","pageSize","totalData","unitColumns","data","sortable","onMounted","async","fetchUnitData","currentSort","column","order","onSort","value","response","axios","get","headers","Authorization","params","unit_name","search","order_by","order_direction","page","rows","sp","rowCount","Math","ceil","error","console","handleAuthError","changePage","isEditMode","editForm","unit_id","resetForm","exportUnitData","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","modal","BootstrapModal","getElementById","show","uploadFileUnitData","fileInput","file","files","formData","FormData","append","post","successCount","downloadTemplateUnitData","showAddModal","showEditModal","rowData","selectedUnit","submitUnit","log","put","index","findIndex","assetUnit","push","showDeleteModal","confirmDelete","delete"],"sourceRoot":""}