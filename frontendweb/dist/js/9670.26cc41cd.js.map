{"version":3,"file":"js/9670.26cc41cd.js","mappings":"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","sources":["webpack://hopeui-vue/./src/views/tables/ListAsset.vue","webpack://hopeui-vue/./src/views/tables/ListAsset.vue?5b28"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-sm-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header d-flex justify-content-between\">\r\n          <div class=\"header-title\">\r\n            <h4 class=\"card-title\">List Aset Local</h4>\r\n          </div>\r\n          <div>\r\n            <button \r\n              class=\"btn btn-success\"\r\n              style=\"margin-right: 10px;\"\r\n              @click=\"showAddModal\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#form-confirmation\">\r\n              Tambah Aset\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-success\" \r\n              style=\"margin-right: 10px;\" \r\n              @click=\"exportAssetData\">\r\n              Ekspor Data\r\n            </button>\r\n            <button\r\n              class=\"btn btn-info\"\r\n              style=\"margin-right: 10px;\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#mass-upload-modal\">\r\n              Mass Upload\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-info\" \r\n              @click=\"downloadTemplateAssetData\">\r\n              Download Template\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\">\r\n              <label for=\"filter\" class=\"form-label\">Filter nama cabang</label>\r\n              <v-select \r\n                :options=\"branchNames\" \r\n                v-model=\"selectedBranches\" \r\n                multiple \r\n                @update:modelValue=\"onBranchSelect\" \r\n                class=\"filter-style\"\r\n              ></v-select>\r\n            </div>\r\n            <div class=\"col-sm-6\"> \r\n              <label for=\"validationCustomUsername01\" class=\"form-label\">Filter nama aset</label>\r\n              <div class=\"input-group has-validation\">\r\n                <input type=\"text\" v-model=\"filterAssetName\" class=\"form-control\" style=\"height: 35px\" id=\"validationCustomUsername01\" aria-describedby=\"inputGroupPrepend\"/>\r\n              </div> \r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\">\r\n              <label for=\"filter\" class=\"form-label\">Filter kategori</label>\r\n              <v-select \r\n                :options=\"assetCategory\" \r\n                v-model=\"selectedCategory\" \r\n                multiple  \r\n                @update:modelValue=\"onCategorySelect\" \r\n                class=\"filter-style\"\r\n              ></v-select>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n              <label for=\"filter\" class=\"form-label\">Filter jenis</label>\r\n              <v-select \r\n                :options=\"assetToolCategory\" \r\n                v-model=\"selectedToolCategory\" \r\n                multiple  \r\n                @update:modelValue=\"onToolCategorySelect\" \r\n                class=\"filter-style\"\r\n              ></v-select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\">\r\n              <label for=\"filter\" class=\"form-label\">Filter kondisi alat</label>\r\n              <v-select \r\n                :options=\"assetToolCondition\" \r\n                v-model=\"selectedToolCondition\" \r\n                multiple  \r\n                @update:modelValue=\"onToolConditionSelect\" \r\n                class=\"filter-style\"\r\n              ></v-select>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n              <label for=\"filter\" class=\"form-label\">Filter satuan</label>\r\n              <v-select \r\n                :options=\"assetUnit\" \r\n                v-model=\"selectedUnit\" \r\n                multiple  \r\n                @update:modelValue=\"onUnitSelect\" \r\n                class=\"filter-style\"\r\n              ></v-select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\"> \r\n              <label for=\"validationCustomUsername01\" class=\"form-label\">Filter stok awal</label>\r\n              <div class=\"input-group has-validation\">\r\n                <input type=\"number\" v-model=\"filterInitialStock\" class=\"form-control\" style=\"height: 35px\" id=\"validationCustomUsername01\" aria-describedby=\"inputGroupPrepend\"/>\r\n              </div> \r\n            </div>\r\n             <div class=\"col-sm-6\"> \r\n              <label for=\"validationCustomUsername01\" class=\"form-label\">Filter stok saat ini</label>\r\n              <div class=\"input-group has-validation\">\r\n                <input type=\"number\" v-model=\"filterCurrentStock\" class=\"form-control\" style=\"height: 35px\" id=\"validationCustomUsername01\" aria-describedby=\"inputGroupPrepend\"/>\r\n              </div> \r\n            </div>\r\n          </div>\r\n         \r\n          <div class=\"row mb-4\">\r\n            <div class=\"col-sm-6\">\r\n              <!-- Input Pencarian Global -->\r\n              <div class=\"search-container\">\r\n                <label for=\"global-search\" class=\"form-label\">Pencarian</label>\r\n                <div class=\"input-group has-validation\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"global-search\"\r\n                    v-model=\"globalSearch\" \r\n                    class=\"form-control filter-style\" \r\n                  />\r\n                  <!-- <button\r\n                    class=\"btn btn-primary filter-style\"\r\n                    @click=\"fetchAssetData\"\r\n                    title=\"Search\">\r\n                    <svg width=\"18\" height=\"19\" viewBox=\"0 0 23 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path d=\"M17 17.124L12.0962 12.2202M12.0962 12.2202C13.2725 11.0439 14 9.41895 14 7.62402C14 4.03417 11.0899 1.12402 7.5 1.12402C3.91015 1.12402 1 4.03417 1 7.62402C1 11.2139 3.91015 14.124 7.5 14.124C9.29493 14.124 10.9199 13.3965 12.0962 12.2202Z\" stroke=\"#FFFFFF\" stroke-width=\"1.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                  </button> -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-4\">\r\n              <label for=\"validationCustomUsername01\" class=\"form-label text-white\">I</label>\r\n              <div class=\"input-group has-validation\">\r\n                <button\r\n                  class=\"btn btn-primary width-button-style filter-style\" \r\n                  @click=\"fetchAssetData\"\r\n                  title=\"Search\">\r\n                  Filter\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-2\">\r\n            <!-- Dropdown Show Entries -->\r\n            <div class=\"col-sm-6 pagination-show-entries\">\r\n              <label for=\"entries\" class=\"form-label col-sm-3\">Show entries</label>\r\n              <select\r\n                id=\"entries\"\r\n                class=\"form-select show-entries\"\r\n                v-model=\"pageSize\"\r\n                @change=\"fetchAssetData\"\r\n              >\r\n                <option value=\"10\">10</option>\r\n                <option value=\"25\">25</option>\r\n                <option value=\"50\">50</option>\r\n                <option value=\"100\">100</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"table-responsive border-bottom\">\r\n            <data-table\r\n              :data=\"assetData\"\r\n              :columns=\"AssetColumns\"  \r\n              :idrow=\"asset_id\"  \r\n              @edit=\"showEditModal\"\r\n              @delete=\"showDeleteModal\"\r\n              @sort=\"onSort\"\r\n            />\r\n            \r\n            <div class=\"pagination-container\">\r\n              <p class=\"text-muted\">\r\n                Showing {{ (currentPage - 1) * pageSize + 1 }} to\r\n                {{ Math.min(currentPage * pageSize, totalData) }} of {{ totalData }} entries\r\n              </p>\r\n              <nav aria-label=\"Page navigation example\">\r\n                <ul class=\"pagination justify-content-end\">\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage - 1)\">Previous</button>\r\n                  </li>\r\n                  <li\r\n                    class=\"page-item\"\r\n                    v-for=\"page in totalPages\"\r\n                    :key=\"page\"\r\n                    :class=\"{ active: currentPage === page }\"\r\n                  >\r\n                    <button class=\"page-link\" @click=\"changePage(page)\">{{ page }}</button>\r\n                  </li>\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage + 1)\">Next</button>\r\n                  </li>\r\n                </ul>\r\n              </nav>\r\n            </div>\r\n\r\n            <div class=\"modal fade\" id=\"form-confirmation\" data-bs-backdrop=\"static\" data-bs-keyboard=\"true\" tabindex=\"-1\" aria-labelledby=\"staticBackdropPermissionLabel\" aria-hidden=\"true\" @hide=\"resetForm\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"staticBackdropPermissionLabel\">{{ isEditMode ? 'Perbarui Aset' : 'Tambah Aset' }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <form @submit.prevent=\"submitAsset\">\r\n                      <p>Form yang bertanda <span class=\"text-primary\">*</span> wajib diisi</p> \r\n                      <div class=\"mb-3\"> \r\n                        <label for=\"input-205\" class=\"form-label\">Dari Cabang<span class=\"text-primary\">*</span></label>\r\n                        <select id=\"branch_id\" v-model=\"editForm.branch_id\" class=\"form-select\" required>\r\n                          <option value=\"\" disabled>Silahkan pilih cabang</option>\r\n                          <option v-for=\"branch in branches\" :key=\"branch.branch_id\" :value=\"branch.branch_id\">\r\n                            {{ branch.branch_name }}\r\n                          </option>\r\n                        </select>\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"asset_name\" class=\"form-label\">Nama Aset<span class=\"text-primary\">*</span></label>\r\n                        <input v-model=\"editForm.asset_name\" maxlength=\"100\" type=\"text\" class=\"form-control\" id=\"asset_name\" required />\r\n                      </div>\r\n                      <div class=\"mb-3\"> \r\n                        <label for=\"category\" class=\"form-label\">Kategori<span class=\"text-primary\">*</span></label>\r\n                        <b-form-select v-model=\"editForm.category\" :options=\"optionsCategory\" id=\"category\" required></b-form-select>\r\n                      </div>\r\n                      <div class=\"mb-3\"> \r\n                        <label for=\"tool_category\" class=\"form-label\">Jenis<span class=\"text-primary\">*</span></label>\r\n                        <select id=\"tool_category_id\" v-model=\"editForm.tool_category_id\" class=\"form-select\" required>\r\n                          <option value=\"0\" disabled>Silahkan pilih jenis</option>\r\n                          <option v-for=\"toolCategory in toolCategories\" :key=\"toolCategory.tool_category_id\" :value=\"toolCategory.tool_category_id\">\r\n                            {{ toolCategory.tool_category_name }}\r\n                          </option>\r\n                        </select>\r\n                      </div>\r\n                      <!-- <div v-if=\"!isEditMode\"> -->\r\n                        <div v-if=\"editForm.category=='Alat'\">\r\n                          <div class=\"mb-3\"> \r\n                            <label for=\"tool_condition\" class=\"form-label\">Kondisi Alat<span class=\"text-primary\">*</span></label>\r\n                            <select id=\"tool_condition_id\" v-model=\"editForm.tool_condition_id\" class=\"form-select\" required>\r\n                              <option value=\"0\" disabled>Silahkan pilih kondisi alat</option>\r\n                              <option v-for=\"toolCondition in toolConditions\" :key=\"toolCondition.tool_condition_id\" :value=\"toolCondition.tool_condition_id\">\r\n                                {{ toolCondition.tool_condition_name }}\r\n                              </option>\r\n                            </select>\r\n                          </div> \r\n                        </div> \r\n                      <div class=\"mb-3\"> \r\n                        <label for=\"unit\" class=\"form-label\">Satuan<span class=\"text-primary\">*</span></label>\r\n                        <select id=\"unit_id\" v-model=\"editForm.unit_id\" class=\"form-select\" required>\r\n                          <option value=\"0\" disabled>Silahkan pilih satuan</option>\r\n                          <option v-for=\"unit in units\" :key=\"unit.unit_id\" :value=\"unit.unit_id\">\r\n                            {{ unit.unit_name }}\r\n                          </option>\r\n                        </select>\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"initial_stock\" class=\"form-label\">Stok Awal<span class=\"text-primary\">*</span></label>\r\n                        <input v-model.number=\"editForm.initial_stock\" maxlength=\"4\" type=\"number\" class=\"form-control\" id=\"initial_stock\" @input=\"syncCurrentStock\" required />\r\n                      </div> \r\n                      <div class=\"mb-3\">\r\n                        <label for=\"current_stock\" class=\"form-label\">Stok Saat Ini<span class=\"text-primary\">*</span></label>\r\n                        <input v-model.number=\"editForm.current_stock\" @input=\"handleCurrentStockInput\" maxlength=\"4\" type=\"number\" class=\"form-control\" id=\"current_stock\" required />\r\n                      </div>  \r\n                      \r\n                      <!-- Tambahkan field lainnya sesuai dengan struktur data asset -->\r\n                      <button type=\"submit\" class=\"btn btn-primary\" :data-bs-dismiss=\"\r\n                        editForm.category=='Alat'?\r\n                        editForm.branch_id&&editForm.asset_name&&editForm.category&&editForm.initial_stock&&editForm.current_stock&&editForm.tool_category_id&&editForm.unit_id&&editForm.tool_condition_id ? 'modal' : null :\r\n                        editForm.branch_id&&editForm.asset_name&&editForm.category&&editForm.initial_stock&&editForm.current_stock&&editForm.tool_category_id&&editForm.unit_id ? 'modal' : null\r\n                        \">{{ isEditMode ? 'Simpan Perubahan' : 'Tambahkan Aset' }}\r\n                      </button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n\r\n            <!-- Modal Konfirmasi Penghapusan -->\r\n            <div class=\"modal fade\" id=\"delete-confirmation\" tabindex=\"-1\" aria-labelledby=\"deleteConfirmationLabel\" aria-hidden=\"true\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"deleteConfirmationLabel\">Konfirmasi Hapus</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <p>Apa kamu yakin ingin menghapus data Aset <strong>{{ selectedAsset?.asset_name }}</strong>?</p>\r\n                  </div>\r\n                  <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"confirmDelete\">Delete</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal for Mass Upload -->\r\n            <div\r\n              class=\"modal fade\"\r\n              id=\"mass-upload-modal\"\r\n              tabindex=\"-1\"\r\n              aria-labelledby=\"massUploadModalLabel\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"massUploadModalLabel\">Mass Upload Aset</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <form @submit.prevent=\"uploadFileAssetData\">\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"upload-file\" class=\"form-label\">Pilih File</label>\r\n                        <input\r\n                          type=\"file\"\r\n                          id=\"upload-file\"\r\n                          ref=\"fileInput\"\r\n                          accept=\".xlsx, .csv\"\r\n                          required\r\n                          class=\"form-control\"\r\n                        />\r\n                      </div>\r\n                      <button type=\"submit\" class=\"btn btn-primary\">Upload</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- Modal Berhasil  Hapus  -->\r\n            <MessageModal :message=\"alertMessage\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n  .filter-style {\r\n    /* max-width: 400px; */\r\n    height: 35px;\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .width-button-style {\r\n    /* max-width: 400px; */\r\n    width: 85px;\r\n    font-size: 13px; /* Kecil */\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .show-entries {\r\n    /* max-width: 400px; */\r\n    width: 95px;\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .pagination-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n\r\n  .pagination-show-entries {\r\n    display: flex; \r\n    align-items: center;\r\n  }\r\n</style>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport DataTable from '@/components/DataTable.vue';\r\n// import Actions from '@/components/TableActions.vue';\r\n// import { useRouter } from 'vue-router';\r\n// import { Modal } from 'bootstrap'\r\n// const router = useRouter();\r\nimport MessageModal from '@/components/ModalAlert.vue'; \r\nimport { Modal as BootstrapModal } from 'bootstrap';\r\nimport vSelect from 'vue-select';\r\nimport 'vue-select/dist/vue-select.css';\r\n\r\n// Definisikan kolom untuk DataTable, gunakan komponen Actions untuk kolom tindakan\r\n// Ambil token dari localStorage\r\nconst token = localStorage.getItem('access_token');\r\nconst user_id = localStorage.getItem('user_id');\r\n\r\nconst AssetColumns = [\r\n  { title: 'ID', data: 'asset_id', sortable: true },\r\n  { title: 'Dari Cabang', data: 'branch_name', sortable: true },\r\n  { title: 'Nama Aset', data: 'asset_name', sortable: true },\r\n  { title: 'Kategori', data: 'category', sortable: true },\r\n  { title: 'Jenis', data: 'tool_category_name', sortable: true },\r\n  { title: 'Kondisi Alat', data: 'tool_condition_name', sortable: true },\r\n  { title: 'Satuan', data: 'unit_name', sortable: true },\r\n  { title: 'Stok Awal', data: 'initial_stock', sortable: true },\r\n  { title: 'Stok Saat Ini', data: 'current_stock', sortable: true },\r\n  // { title: 'ID Jenis', data: 'tool_category_id', sortable: true },\r\n  // { title: 'ID Kondisi Alat', data: 'tool_condition_id', sortable: true },\r\n  // { title: 'ID Unit', data: 'unit_id', sortable: true },\r\n  { title: 'Aksi', data: 'actions', sortable: false },\r\n];\r\n\r\n// Reactive data untuk menyimpan data asset\r\nconst titleMessage = ref('');\r\nconst alertMessage = ref('');\r\nconst assetData = ref([]);\r\n\r\nconst branchNames = ref([]);\r\nconst selectedBranches = ref([]); \r\nconst assetCategory = ref([]);\r\nconst selectedCategory = ref([]);\r\nconst assetToolCategory = ref([]);\r\nconst selectedToolCategory = ref([]);\r\nconst assetToolCondition = ref([]);\r\nconst selectedToolCondition = ref([]);\r\nconst assetUnit = ref([]);\r\nconst selectedUnit = ref([]);\r\n\r\nconst filterAssetName = ref('');\r\nconst filterInitialStock = ref('');\r\nconst filterCurrentStock = ref('');\r\nconst globalSearch = ref('');\r\n\r\nconst currentPage = ref(1); // Halaman aktif\r\nconst totalPages = ref(0); // Total halaman\r\nconst pageSize = ref(10); // Banyaknya data per halaman\r\nconst totalData = ref(0); // Jumlah total data dari API\r\n\r\nconst isEditMode = ref(false) \r\n\r\nconst editForm = ref({\r\n  asset_id: null,\r\n  branch_id: '',\r\n  asset_name: '',\r\n  category: '',  \r\n  unit: '', \r\n  initial_stock: '',\r\n  current_stock: '',\r\n  tool_category_id: 0,\r\n  tool_condition_id: 0,\r\n  unit_id: 0,\r\n})\r\n\r\n// Fungsi untuk reset form saat modal ditutup\r\nconst resetForm = () => {\r\n  editForm.value = {\r\n    asset_id: null,\r\n    branch_id: '',\r\n    asset_name: '',\r\n    category: '',  \r\n    unit: '', \r\n    initial_stock: '',\r\n    current_stock: '',\r\n    tool_category_id: 0,\r\n    tool_condition_id: 0,\r\n    unit_id: 0,\r\n  }\r\n}\r\n\r\nconst syncCurrentStock= () => { \r\n  editForm.value.current_stock = editForm.value.initial_stock \r\n}\r\n\r\n// Fungsi untuk mencegah input `current_stock` melebihi `initial_stock`\r\nconst handleCurrentStockInput = (event) => {\r\n  const maxStock = editForm.value.initial_stock;\r\n  if (event.target.value > maxStock) {\r\n    event.target.value = maxStock; // Batasi nilai ke maksimum\r\n    editForm.value.current_stock = maxStock;\r\n  }\r\n};\r\n\r\nconst selectedAsset = ref(null) // Menyimpan data asset yang dipilih untuk dihapus\r\n\r\n// Fungsi untuk menampilkan modal konfirmasi penghapusan\r\nconst showDeleteModal = (rowData) => {\r\n  selectedAsset.value = rowData \r\n}\r\n\r\n// Fungsi untuk membuka modal edit dan mengisi form dengan data yang dipilih\r\nconst showEditModal = (rowData) => {\r\n  selectedAsset.value = rowData\r\n  editForm.value = { ...rowData }\r\n  isEditMode.value = true\r\n}\r\n\r\n// Fungsi untuk membuka modal tambah dengan form kosong\r\nconst showAddModal = () => {\r\n  resetForm()  \r\n  isEditMode.value = false \r\n}\r\n\r\n// Mengambil data asset saat komponen dimuat\r\nonMounted(async () => { \r\n  await fetchAssetCategory();\r\n  await fetchAssetToolCategory();\r\n  await fetchAssetToolCondition();\r\n  await fetchAssetUnit();\r\n  await fetchBranches();\r\n  await fetchAssetData();\r\n});\r\n\r\nconst currentSort = ref({ column: 'asset_id', order: 'DESC' });\r\n\r\nconst onSort = ({ column, order }) => {\r\n  currentSort.value = { column, order };\r\n  fetchAssetData(); // Panggil ulang API dengan parameter sorting\r\n};\r\n\r\nconst onBranchSelect = (selected) => {\r\n  selectedBranches.value = selected; // Perbarui nilai terpilih\r\n  // fetchAssetData(); // Panggil fungsi fetch dengan data terpilih\r\n};\r\n\r\nconst onCategorySelect = (selectedCategory) => {\r\n  selectedCategory.value = selectedCategory; // Perbarui nilai terpilih\r\n  // fetchAssetData(); // Panggil fungsi fetch dengan data terpilih\r\n};\r\n\r\nconst onToolCategorySelect = (selectedToolCategory) => {\r\n  selectedToolCategory.value = selectedToolCategory; // Perbarui nilai terpilih\r\n  // fetchAssetData(); // Panggil fungsi fetch dengan data terpilih\r\n};\r\n\r\nconst onToolConditionSelect = (selectedToolCondition) => {\r\n  selectedToolCondition.value = selectedToolCondition; // Perbarui nilai terpilih\r\n  // fetchAssetData(); // Panggil fungsi fetch dengan data terpilih\r\n};\r\n\r\nconst onUnitSelect = (selectedUnit) => {\r\n  selectedUnit.value = selectedUnit; // Perbarui nilai terpilih\r\n  // fetchAssetData(); // Panggil fungsi fetch dengan data terpilih\r\n};\r\n\r\n// Fungsi untuk submit tambah/edit\r\nconst submitAsset = async () => {\r\n  if(editForm.value.category=='Bahan'){  \r\n    // editForm.value.tool_category_id = 0;\r\n    editForm.value.tool_condition_id = 0;\r\n    // editForm.value.unit_id = 0;\r\n  }\r\n  \r\n  console.log('Edit data submitted:', editForm.value)\r\n  try {\r\n    if (isEditMode.value) {\r\n      // Update data jika dalam mode edit\r\n      editForm.value.user_id = user_id;\r\n      editForm.value.operation = 'Edit';\r\n      const response = await axios.put(`http://localhost:3000/api/asset/${editForm.value.asset_id}`, editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil diupdate:', response.data)\r\n      const index = assetData.value.findIndex(asset => asset.asset_id === editForm.value.asset_id)\r\n      if (index !== -1) {\r\n        assetData.value[index] = { ...editForm.value }\r\n      }\r\n      fetchAssetData()\r\n    }else {\r\n      // Tambahkan data baru jika dalam mode tambah\r\n      editForm.value.user_id = user_id;\r\n      editForm.value.operation = 'Tambah';\r\n      const response = await axios.post('http://localhost:3000/api/asset', editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil ditambahkan:', response.data)\r\n      fetchAssetData()\r\n    }\r\n  } catch (error) {\r\n    console.error('Gagal mengupdate data:', error)\r\n    handleAuthError();\r\n  } \r\n  // isEditModalOpen.value = false // Tutup modal setelah submit\r\n}\r\n\r\n// Fungsi untuk mengambil data asset dari backend\r\nconst fetchAssetData = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/asset', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: { \r\n        branch_name: selectedBranches.value.join(','), \r\n        asset_name: filterAssetName.value,\r\n        category: selectedCategory.value.join(','), \r\n        tool_category_name: selectedToolCategory.value.join(','), \r\n        tool_condition_name: selectedToolCondition.value.join(','), \r\n        unit_name: selectedUnit.value.join(','),\r\n        initial_stock: filterInitialStock.value,\r\n        current_stock: filterCurrentStock.value,\r\n        search: globalSearch.value, \r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n        page: currentPage.value, // Kirim nomor halaman\r\n        pageSize: pageSize.value, // Kirim ukuran data per halaman\r\n        // order_by: 'asset_id', // Sorting berdasarkan ID\r\n        // order_direction: 'DESC', // Urutan descending\r\n      },\r\n    })\r\n    assetData.value = response.data.rows.map((asset) => ({\r\n      ...asset,\r\n      branch_name: asset.branch?.branch_name || '',\r\n      tool_category_name: asset.assetToolCategory?.tool_category_name || '',\r\n      tool_condition_name: asset.assetToolCondition?.tool_condition_name || '',\r\n      unit_name: asset.assetUnit?.unit_name || ''\r\n    })) \r\n    totalData.value = response.data.sp.rowCount;\r\n    totalPages.value = Math.ceil(response.data.sp.rowCount / pageSize.value);\r\n  } catch (error) {\r\n    console.error('Error fetching asset data:', error)\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengganti halaman\r\nconst changePage = (page) => {\r\n  if (page >= 1 && page <= totalPages.value) {\r\n    currentPage.value = page;\r\n    fetchAssetData(); // Refresh data untuk halaman baru\r\n  }\r\n};\r\n\r\n// Daftar dropdown\r\nconst branches = ref([]);\r\nconst toolCategories = ref([]);\r\nconst toolConditions = ref([]);\r\nconst units = ref([]);\r\n\r\n// Mengambil data cabang\r\nconst fetchBranches = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/branch', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {  \r\n        // order_by: currentSort.value.column,\r\n        // order_direction: currentSort.value.order,\r\n        page: 1,\r\n        pageSize: 1000,\r\n      },\r\n    });\r\n    branches.value = response.data.rows;\r\n    branchNames.value = response.data.rows.map(item => item.branch_name);\r\n  } catch (error) {\r\n    console.error('Error fetching branches:', error);\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\nconst fetchAssetCategory = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/asset/getAssetsCategory', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    }); \r\n    assetCategory.value = [...new Set(response.data)];\r\n  } catch (error) {\r\n    console.error('Error fetching assetCategory:', error);\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\nconst fetchAssetToolCategory = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/asset_tool_category', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {  \r\n        // order_by: currentSort.value.column,\r\n        // order_direction: currentSort.value.order,\r\n        page: 1,\r\n        pageSize: 1000,\r\n      },\r\n    });\r\n    toolCategories.value = response.data.rows;\r\n    assetToolCategory.value = response.data.rows.map(item => item.tool_category_name);\r\n  } catch (error) {\r\n    console.error('Error fetching Tool Category:', error);\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\nconst fetchAssetToolCondition = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/asset_tool_condition', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {  \r\n        // order_by: currentSort.value.column,\r\n        // order_direction: currentSort.value.order,\r\n        page: 1,\r\n        pageSize: 1000,\r\n      },\r\n    }); \r\n    toolConditions.value = response.data.rows;\r\n    assetToolCondition.value = response.data.rows.map(item => item.tool_condition_name);\r\n  } catch (error) {\r\n    console.error('Error fetching Tool Condition:', error);\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\nconst fetchAssetUnit = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/asset_unit', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {  \r\n        // order_by: currentSort.value.column,\r\n        // order_direction: currentSort.value.order,\r\n        page: 1,\r\n        pageSize: 1000,\r\n      },\r\n    });\r\n    units.value = response.data.rows;\r\n    assetUnit.value = response.data.rows.map(item => item.unit_name);\r\n  } catch (error) {\r\n    console.error('Error fetching Unit', error);\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\nconst exportAssetData = async () => {\r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/asset/export\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: { \r\n        branch_name: selectedBranches.value.join(','), \r\n        asset_name: filterAssetName.value,\r\n        category: selectedCategory.value.join(','), \r\n        tool_category_name: selectedToolCategory.value.join(','), \r\n        tool_condition_name: selectedToolCondition.value.join(','), \r\n        unit_name: selectedUnit.value.join(','),\r\n        initial_stock: filterInitialStock.value,\r\n        current_stock: filterCurrentStock.value,\r\n        search: globalSearch.value, \r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n       },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"data_aset.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error exporting data:\", error);\r\n    // alert(\"Gagal mengekspor data. Silakan coba lagi.\");\r\n    titleMessage.value = `Gagal Ekspor`;\r\n    alertMessage.value = `Gagal mengekspor data. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst uploadFileAssetData = async () => {\r\n  const fileInput = document.getElementById('upload-file');\r\n  const file = fileInput.files[0];\r\n\r\n  if (!file) {\r\n    titleMessage.value = `Pilih File`;\r\n    alertMessage.value = 'Silakan pilih file sebelum mengunggah.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  try {\r\n    const response = await axios.post('http://localhost:3000/api/asset/mass-upload', formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n    titleMessage.value = `Berhasil`;\r\n    alertMessage.value = `Upload berhasil, ${response.data.successCount} data aset berhasil terupload`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n \r\n    fetchAssetData();\r\n  } catch (error) {\r\n    console.error('Gagal mengunggah file:', error);\r\n    titleMessage.value = `Gagal Upload`;\r\n    alertMessage.value = 'Gagal mengunggah file. Pastikan format file benar.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst downloadTemplateAssetData = async () => { \r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/asset/template/\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"template_data_aset.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error downloading template:\", error); \r\n    titleMessage.value = `Gagal Download`;\r\n    alertMessage.value = `Gagal mendownload template. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n}\r\n\r\nconst confirmDelete = async () => {\r\n  try {\r\n    console.log('Id deleted:', selectedAsset.value.asset_id)\r\n    await axios.delete(`http://localhost:3000/api/asset/${selectedAsset.value.asset_id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    }) \r\n    alertMessage.value = `Data Aset <strong>${selectedAsset.value.asset_name}</strong> berhasil dihapus.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();  \r\n\r\n    // Refresh data setelah penghapusan\r\n    fetchAssetData()\r\n  } catch (error) {\r\n    console.error('Failed to delete asset data:', error) \r\n    handleAuthError();\r\n  }\r\n}\r\n\r\nconst handleAuthError = () => {\r\n  // router.push({ name: 'auth.login' });\r\n  alertMessage.value = `Cek koneksi internet Anda.`;\r\n  const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n  modal.show();\r\n};\r\n\r\nconst optionsCategory = [\r\n  { value: null, text: 'Silahkan pilih kategori aset' },\r\n  { value: 'Bahan', text: 'Bahan' }, \r\n  { value: 'Alat', text: 'Alat' },   \r\n]\r\n\r\n// const optionsToolCategory = [\r\n//   { value: null, text: 'Silahkan pilih jenis },\r\n//   { value: 'Peralatan Fumigasi', text: 'Peralatan Fumigasi' }, \r\n//   { value: 'Alat Ukur Fumigasi', text: 'Alat Ukur Fumigasi' },   \r\n//   { value: 'Peralatan Pest Control', text: 'Peralatan Pest Control' },   \r\n//   { value: 'Plastic Sheet', text: 'Plastic Sheet' },   \r\n// ]\r\n\r\n// const optionsToolCondition = [\r\n//   { value: null, text: 'Silahkan pilih kondisi alat' },\r\n//   { value: 'Baik', text: 'Baik' }, \r\n//   { value: 'Cukup', text: 'Cukup' },  \r\n//   { value: 'Kurang', text: 'Kurang' },\r\n//   { value: 'Rusak', text: 'Rusak' },\r\n// ]\r\n\r\n// const optionsUnit = [\r\n//   { value: null, text: 'Silahkan pilih satuan' },\r\n//   { value: 'UNIT', text: 'UNIT' }, \r\n//   { value: 'PCS', text: 'PCS' },\r\n//   { value: 'TABUNG', text: 'TABUNG' },  \r\n//   { value: 'KG', text: 'KG' },\r\n//   { value: 'GRAM', text: 'GRAM' },\r\n//   { value: 'L', text: 'L' },\r\n//   { value: 'ML', text: 'ML' },\r\n//   { value: 'M', text: 'M' },\r\n//   { value: 'BUTIR', text: 'BUTIR' },\r\n//   { value: 'BAG', text: 'BAG' },\r\n//   { value: 'PACK', text: 'PACK' },\r\n//   { value: 'SHEET', text: 'SHEET' }, \r\n// ]\r\n\r\n</script>\r\n","import script from \"./ListAsset.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListAsset.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListAsset.vue?vue&type=style&index=0&id=023062b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-023062b6\"]])\n\nexport default __exports__"],"names":["token","localStorage","getItem","user_id","AssetColumns","title","data","sortable","titleMessage","ref","alertMessage","assetData","branchNames","selectedBranches","assetCategory","selectedCategory","assetToolCategory","selectedToolCategory","assetToolCondition","selectedToolCondition","assetUnit","selectedUnit","filterAssetName","filterInitialStock","filterCurrentStock","globalSearch","currentPage","totalPages","pageSize","totalData","isEditMode","editForm","asset_id","branch_id","asset_name","category","unit","initial_stock","current_stock","tool_category_id","tool_condition_id","unit_id","resetForm","value","syncCurrentStock","handleCurrentStockInput","event","maxStock","target","selectedAsset","showDeleteModal","rowData","showEditModal","showAddModal","onMounted","async","fetchAssetCategory","fetchAssetToolCategory","fetchAssetToolCondition","fetchAssetUnit","fetchBranches","fetchAssetData","currentSort","column","order","onSort","onBranchSelect","selected","onCategorySelect","onToolCategorySelect","onToolConditionSelect","onUnitSelect","submitAsset","console","log","operation","response","axios","put","headers","Authorization","index","findIndex","asset","post","error","handleAuthError","get","params","branch_name","join","tool_category_name","tool_condition_name","unit_name","search","order_by","order_direction","page","rows","map","branch","sp","rowCount","Math","ceil","changePage","branches","toolCategories","toolConditions","units","item","Set","exportAssetData","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","modal","BootstrapModal","getElementById","show","uploadFileAssetData","fileInput","file","files","formData","FormData","append","successCount","downloadTemplateAssetData","confirmDelete","delete","optionsCategory","text","__exports__"],"sourceRoot":""}