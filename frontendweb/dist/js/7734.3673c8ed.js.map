{"version":3,"file":"js/7734.3673c8ed.js","mappings":"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","sources":["webpack://hopeui-vue/./src/views/tables/ListUser.vue","webpack://hopeui-vue/./src/views/tables/ListUser.vue?94cf"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-sm-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header d-flex justify-content-between\">\r\n          <div class=\"header-title\">\r\n            <h4 class=\"card-title\">List User</h4>\r\n          </div>\r\n          <div>\r\n            <button\r\n              class=\"btn btn-success\"\r\n              style=\"margin-right: 10px;\" \r\n              @click=\"showAddModal\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#form-confirmation\">\r\n              Tambah User\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-success\" \r\n              style=\"margin-right: 10px;\" \r\n              @click=\"exportUserData\">\r\n              Ekspor Data\r\n            </button>\r\n            <button\r\n              class=\"btn btn-info\"\r\n              style=\"margin-right: 10px;\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#mass-upload-modal\">\r\n              Mass Upload\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-info\" \r\n              @click=\"downloadTemplateUserData\">\r\n              Download Template\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\">\r\n              <!-- <b-col md=\"4\"> -->\r\n                <label for=\"validationCustomUsername01\" class=\"form-label\">Filter nama karyawan</label>\r\n                <div class=\"input-group has-validation\">\r\n                  <input type=\"text\" v-model=\"filterFullname\" class=\"form-control\" style=\"height: 35px\" id=\"validationCustomUsername01\" aria-describedby=\"inputGroupPrepend\"/>\r\n                  <!-- <button\r\n                    class=\"btn btn-primary\"\r\n                    style=\"height: 35px\"\r\n                    @click=\"fetchUserData\"\r\n                    title=\"Search\">\r\n                    <svg width=\"18\" height=\"19\" viewBox=\"0 0 23 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path d=\"M17 17.124L12.0962 12.2202M12.0962 12.2202C13.2725 11.0439 14 9.41895 14 7.62402C14 4.03417 11.0899 1.12402 7.5 1.12402C3.91015 1.12402 1 4.03417 1 7.62402C1 11.2139 3.91015 14.124 7.5 14.124C9.29493 14.124 10.9199 13.3965 12.0962 12.2202Z\" stroke=\"#FFFFFF\" stroke-width=\"1.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                  </button> -->\r\n                </div>\r\n              <!-- </b-col> -->\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n              <!-- <b-col md=\"4\"> -->\r\n                <label for=\"validationCustomUsername01\" class=\"form-label\">Filter username</label>\r\n                <div class=\"input-group has-validation\">\r\n                  <input type=\"text\" v-model=\"filterUsername\" class=\"form-control\" style=\"height: 35px\" id=\"validationCustomUsername01\" aria-describedby=\"inputGroupPrepend\"/>\r\n                  <!-- <button\r\n                    class=\"btn btn-primary\"\r\n                    style=\"height: 35px\"\r\n                    @click=\"fetchUserData\"\r\n                    title=\"Search\">\r\n                    <svg width=\"18\" height=\"19\" viewBox=\"0 0 23 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path d=\"M17 17.124L12.0962 12.2202M12.0962 12.2202C13.2725 11.0439 14 9.41895 14 7.62402C14 4.03417 11.0899 1.12402 7.5 1.12402C3.91015 1.12402 1 4.03417 1 7.62402C1 11.2139 3.91015 14.124 7.5 14.124C9.29493 14.124 10.9199 13.3965 12.0962 12.2202Z\" stroke=\"#FFFFFF\" stroke-width=\"1.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                  </button> -->\r\n                </div>\r\n              <!-- </b-col> -->\r\n            </div> \r\n          </div>\r\n          \r\n          <div class=\"row mb-3\">\r\n            <div class=\"col-sm-6\">\r\n              <label for=\"filter\" class=\"form-label\">Filter role</label>\r\n              <v-select \r\n                :options=\"userRole\" \r\n                v-model=\"selectedRole\" \r\n                multiple  \r\n                @update:modelValue=\"onRoleSelect\" \r\n                class=\"filter-style\"\r\n              ></v-select>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n              <!-- Input Pencarian Global -->\r\n              <div class=\"search-container\">\r\n                <label for=\"global-search\" class=\"form-label\">Pencarian</label>\r\n                <div class=\"input-group has-validation\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"global-search\"\r\n                    v-model=\"globalSearch\" \r\n                    class=\"form-control filter-style\" \r\n                  />\r\n                  <!-- <button\r\n                    class=\"btn btn-primary filter-style\"\r\n                    @click=\"fetchUserData\"\r\n                    title=\"Search\">\r\n                    <svg width=\"18\" height=\"19\" viewBox=\"0 0 23 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path d=\"M17 17.124L12.0962 12.2202M12.0962 12.2202C13.2725 11.0439 14 9.41895 14 7.62402C14 4.03417 11.0899 1.12402 7.5 1.12402C3.91015 1.12402 1 4.03417 1 7.62402C1 11.2139 3.91015 14.124 7.5 14.124C9.29493 14.124 10.9199 13.3965 12.0962 12.2202Z\" stroke=\"#FFFFFF\" stroke-width=\"1.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                  </button> -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-4\">\r\n            <div class=\"col-sm-4\">\r\n              <button\r\n                class=\"btn btn-primary width-button-style filter-style\" \r\n                @click=\"fetchUserData\"\r\n                title=\"Search\">\r\n                Filter\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-2\">\r\n            <!-- Dropdown Show Entries -->\r\n            <div class=\"col-sm-6 pagination-show-entries\">\r\n              <label for=\"entries\" class=\"form-label col-sm-3\">Show entries</label>\r\n              <select\r\n                id=\"entries\"\r\n                class=\"form-select show-entries\"\r\n                v-model=\"pageSize\"\r\n                @change=\"fetchUserData\"\r\n              >\r\n                <option value=\"10\">10</option>\r\n                <option value=\"25\">25</option>\r\n                <option value=\"50\">50</option>\r\n                <option value=\"100\">100</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"table-responsive border-bottom\">\r\n            <data-table\r\n              :data=\"userData\"\r\n              :columns=\"columns\"\r\n              :idrow=\"user_id\"\r\n              @edit=\"showEditModal\"\r\n              @delete=\"showDeleteModal\"\r\n              @sort=\"onSort\"\r\n            />\r\n\r\n            <div class=\"pagination-container\">\r\n              <p class=\"text-muted\">\r\n                Showing {{ (currentPage - 1) * pageSize + 1 }} to\r\n                {{ Math.min(currentPage * pageSize, totalData) }} of {{ totalData }} entries\r\n              </p>\r\n              <nav aria-label=\"Page navigation example\">\r\n                <ul class=\"pagination justify-content-end\">\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage - 1)\">Previous</button>\r\n                  </li>\r\n                  <li\r\n                    class=\"page-item\"\r\n                    v-for=\"page in totalPages\"\r\n                    :key=\"page\"\r\n                    :class=\"{ active: currentPage === page }\"\r\n                  >\r\n                    <button class=\"page-link\" @click=\"changePage(page)\">{{ page }}</button>\r\n                  </li>\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage + 1)\">Next</button>\r\n                  </li>\r\n                </ul>\r\n              </nav>\r\n            </div>\r\n            \r\n            <div class=\"modal fade\" id=\"form-confirmation\" data-bs-backdrop=\"static\" data-bs-keyboard=\"true\" tabindex=\"-1\" aria-labelledby=\"staticBackdropPermissionLabel\" aria-hidden=\"true\" @hide=\"resetForm\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"staticBackdropPermissionLabel\">{{ isEditMode ? 'Perbarui User' : 'Tambah User' }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <form @submit.prevent=\"submitUser\">\r\n                      <p>Form yang bertanda <span class=\"text-primary\">*</span> wajib diisi</p> \r\n                      <div class=\"mb-3\"> \r\n                        <label for=\"employee_id\" class=\"form-label\">Dari Nama</label>\r\n                        <select id=\"employee_id\" v-model=\"editForm.employee_id\" class=\"form-select\">\r\n                          <option value=\"\" disabled>Silahkan pilih nama</option>\r\n                          <option v-for=\"employee in employees\" :key=\"employee.employee_id\" :value=\"employee.employee_id\">\r\n                            {{ employee.fullname }}\r\n                          </option>\r\n                        </select>\r\n                      </div> \r\n                      <div class=\"mb-3\">\r\n                        <label for=\"username\" class=\"form-label\">Username<span class=\"text-primary\">*</span></label>\r\n                        <input v-model=\"editForm.username\" maxlength=\"15\" type=\"text\" class=\"form-control\" id=\"username\" required />\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"password\" class=\"form-label\">Password<span class=\"text-primary\">*</span></label>\r\n                        <input v-model=\"editForm.password\" maxlength=\"15\" type=\"password\" class=\"form-control\" id=\"password\" :required=\"!isEditMode\" />\r\n                      </div>\r\n                      <div class=\"mb-3\"> \r\n                        <label for=\"role\" class=\"form-label\">Role Karyawan<span class=\"text-primary\">*</span></label>\r\n                        <b-form-select v-model=\"editForm.role\" :options=\"optionsRole\" id=\"role\" required></b-form-select>\r\n                      </div>\r\n                      <!-- Tambahkan field lainnya sesuai dengan struktur data user -->\r\n                      <button type=\"submit\" class=\"btn btn-primary\" :data-bs-dismiss=\"\r\n                        isEditMode?\r\n                        editForm.username&&editForm.role ? 'modal' : null :\r\n                        editForm.username&&editForm.password&&editForm.role ? 'modal' : null\r\n                        \">{{ isEditMode ? 'Simpan Perubahan' : 'Tambahkan User' }}\r\n                      </button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal Konfirmasi Penghapusan -->\r\n            <div class=\"modal fade\" id=\"delete-confirmation\" tabindex=\"-1\" aria-labelledby=\"deleteConfirmationLabel\" aria-hidden=\"true\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"deleteConfirmationLabel\">Konfirmasi Hapus</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <p>Apa kamu yakin ingin menghapus data User <strong>{{ selectedUser?.username }}</strong>?</p>\r\n                  </div>\r\n                  <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"confirmDelete\">Delete</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal Konfirmasi Penghapusan -->\r\n            <div class=\"modal fade\" id=\"delete-confirmation\" tabindex=\"-1\" aria-labelledby=\"deleteConfirmationLabel\" aria-hidden=\"true\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"deleteConfirmationLabel\">Konfirmasi Hapus</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <p>Apa kamu yakin ingin menghapus data Karyawan <strong>{{ selectedEmployee?.fullname }}</strong>?</p>\r\n                  </div>\r\n                  <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"confirmDelete\">Delete</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal for Mass Upload -->\r\n            <div\r\n              class=\"modal fade\"\r\n              id=\"mass-upload-modal\"\r\n              tabindex=\"-1\"\r\n              aria-labelledby=\"massUploadModalLabel\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"massUploadModalLabel\">Mass Upload User</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <form @submit.prevent=\"uploadFileUserData\">\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"upload-file\" class=\"form-label\">Pilih File</label>\r\n                        <input\r\n                          type=\"file\"\r\n                          id=\"upload-file\"\r\n                          ref=\"fileInput\"\r\n                          accept=\".xlsx, .csv\"\r\n                          required\r\n                          class=\"form-control\"\r\n                        />\r\n                      </div>\r\n                      <button type=\"submit\" class=\"btn btn-primary\">Upload</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Memanggil Modal  -->\r\n            <MessageModal :message=\"alertMessage\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n  .filter-style {\r\n    /* max-width: 400px; */\r\n    height: 35px;\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .width-button-style {\r\n    /* max-width: 400px; */\r\n    width: 85px;\r\n    font-size: 13px; /* Kecil */\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .show-entries {\r\n    /* max-width: 400px; */\r\n    width: 95px;\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .pagination-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n\r\n  .pagination-show-entries {\r\n    display: flex; \r\n    align-items: center;\r\n  }\r\n</style>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport DataTable from '@/components/DataTable.vue';\r\n// import Actions from '@/components/TableActions.vue';\r\n// import { useRouter } from 'vue-router';\r\n// import { Modal } from 'bootstrap'\r\n// const router = useRouter();\r\nimport MessageModal from '@/components/ModalAlert.vue'; \r\nimport { Modal as BootstrapModal } from 'bootstrap';\r\nimport vSelect from 'vue-select';\r\nimport 'vue-select/dist/vue-select.css';\r\n\r\nconst titleMessage = ref('');\r\nconst alertMessage = ref('');\r\nconst filterFullname = ref('');\r\nconst filterUsername = ref(''); \r\nconst globalSearch = ref('');\r\n\r\nconst currentPage = ref(1); // Halaman aktif\r\nconst totalPages = ref(0); // Total halaman\r\nconst pageSize = ref(10); // Banyaknya data per halaman\r\nconst totalData = ref(0); // Jumlah total data dari API\r\n\r\n// Definisikan kolom untuk DataTable, gunakan komponen Actions untuk kolom tindakan\r\n// Ambil token dari localStorage\r\nconst token = localStorage.getItem('access_token');\r\n\r\nconst columns = [\r\n  { title: 'ID', data: 'user_id', sortable: true },\r\n  { title: 'Dari Nama', data: 'fullname', sortable: true },\r\n  { title: 'Username', data: 'username', sortable: true },\r\n  { title: 'Role', data: 'role', sortable: true },\r\n  { title: 'Aksi', data: 'actions', sortable: false },\r\n  // { \r\n  //   title: 'Password', \r\n  //   data: 'password',\r\n  //   render: function(data) {\r\n  //     return maskPassword(data);\r\n  //   }\r\n  // }, \r\n];\r\n\r\n// Reactive data untuk menyimpan data user\r\nconst userData = ref([]);\r\nconst userRole = ref([]);\r\nconst selectedRole = ref([]);\r\n\r\n// const isEditModalOpen = ref(false)\r\nconst isEditMode = ref(false)\r\n\r\nconst editForm = ref({\r\n  user_id: null,\r\n  employee_id: '',\r\n  username: '',\r\n  password: '',\r\n  role: '',\r\n})\r\n\r\n// Fungsi untuk membuka modal edit dan mengisi form dengan data yang dipilih\r\n// const openEditModal = (rowData) => {\r\n//   editForm.value = { ...rowData }\r\n//   isEditModalOpen.value = true\r\n// }\r\n\r\n// Fungsi untuk reset form saat modal ditutup\r\nconst resetForm = () => {\r\n  editForm.value = {\r\n    user_id: null,\r\n    employee_id: '',\r\n    username: '',\r\n    password: '',\r\n    role: '',\r\n  }\r\n}\r\n\r\nconst selectedUser = ref(null) // Menyimpan data user yang dipilih untuk dihapus\r\n// let deleteModalInstance = null // Menyimpan instance modal\r\n// let editModalInstance = null // Menyimpan instance modal\r\n\r\n// Fungsi untuk menampilkan modal konfirmasi penghapusan\r\nconst showDeleteModal = (rowData) => {\r\n  selectedUser.value = rowData\r\n  // deleteModalInstance = new Modal(document.getElementById('delete-confirmation'))\r\n  // deleteModalInstance.show()\r\n}\r\n\r\n// Fungsi untuk membuka modal edit dan mengisi form dengan data yang dipilih\r\nconst showEditModal = (rowData) => {\r\n  selectedUser.value = rowData\r\n  editForm.value = { ...rowData }\r\n  editForm.value.password = '';\r\n  isEditMode.value = true\r\n  // isEditModalOpen.value = true\r\n \r\n  // editModalInstance = new Modal(document.getElementById('form-confirmation'))\r\n  // deleteModalInstance.show()\r\n}\r\n\r\n// Fungsi untuk membuka modal tambah dengan form kosong\r\nconst showAddModal = () => {\r\n  resetForm() // Kosongkan form\r\n  isEditMode.value = false\r\n  // isEditModalOpen.value = true\r\n}\r\n\r\n// Fungsi untuk submit tambah/edit\r\nconst submitUser = async () => {\r\n  if(editForm.value.employee_id == \"\"){\r\n    editForm.value = {\r\n      user_id: editForm.value.user_id, \r\n      username: editForm.value.username,\r\n      password: editForm.value.password,\r\n      role: editForm.value.role\r\n    } \r\n  }else{\r\n    editForm.value = {\r\n      user_id: editForm.value.user_id,\r\n      employee_id: editForm.value.employee_id,\r\n      username: editForm.value.username,\r\n      password: editForm.value.password,\r\n      role: editForm.value.role\r\n    }\r\n  }\r\n \r\n  console.log('Edit data submitted:', editForm.value)\r\n  try {\r\n    if (isEditMode.value) {\r\n      // Update data jika dalam mode edit\r\n      const response = await axios.put(`http://localhost:3000/api/user/${editForm.value.user_id}`, editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil diupdate:', response.data)\r\n\r\n      // Perbarui data userData di tabel setelah update\r\n      // const index = userData.value.findIndex(user => user.user_id === editForm.value.user_id)\r\n      // if (index !== -1) {\r\n      //   userData.value[index] = { ...editForm.value }\r\n      // }\r\n      fetchUserData()\r\n    }else {\r\n      // Tambahkan data baru jika dalam mode tambah\r\n      const response = await axios.post('http://localhost:3000/api/user', editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil ditambahkan:', response.data)\r\n\r\n      // Tambahkan data baru ke tabel\r\n      // userData.value.push(response.data)\r\n      fetchUserData()\r\n    }\r\n    // Tutup modal setelah berhasil update\r\n    // isEditModalOpen.value = false\r\n  } catch (error) {\r\n    console.error('Gagal mengupdate data:', error)\r\n    handleAuthError();\r\n    // alert('Lakukan login terlebih dulu') \r\n  } \r\n  // isEditModalOpen.value = false // Tutup modal setelah submit\r\n}\r\n\r\n// Mengambil data user saat komponen dimuat\r\nonMounted(async () => {\r\n  await fetchUserRole();\r\n  await fetchEmployees();\r\n  await fetchUserData();\r\n});\r\n\r\nconst currentSort = ref({ column: 'user_id', order: 'DESC' });\r\n\r\nconst onSort = ({ column, order }) => {\r\n  currentSort.value = { column, order };\r\n  fetchUserData(); // Panggil ulang API dengan parameter sorting\r\n};\r\n\r\n// Daftar nama\r\nconst employees = ref([]);\r\n\r\n// Mengambil data nama\r\nconst fetchEmployees = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/employee', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    employees.value = response.data.rows;\r\n  } catch (error) {\r\n    console.error('Error fetching employees:', error);\r\n    handleAuthError();\r\n    // alert('Lakukan login terlebih dulu') \r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data user dari backend\r\nconst fetchUserData = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/user', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: {  \r\n        fullname: filterFullname.value,\r\n        username: filterUsername.value,\r\n        role: selectedRole.value.join(','),\r\n        search: globalSearch.value,\r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n        page: currentPage.value, // Kirim nomor halaman\r\n        pageSize: pageSize.value, // Kirim ukuran data per halaman\r\n        // order_by: 'user_id', // Sorting berdasarkan ID\r\n        // order_direction: 'DESC', // Urutan descending\r\n      },\r\n    })\r\n    userData.value = response.data.rows.map((user) => ({\r\n      ...user,\r\n      fullname: user.employee?.fullname || 'N/A' // Ambil nama nama atau tampilkan \"N/A\" jika tidak ada\r\n    }))\r\n    totalData.value = response.data.sp.rowCount;\r\n    totalPages.value = Math.ceil(response.data.sp.rowCount / pageSize.value);\r\n  } catch (error) {\r\n    console.error('Error fetching user data:', error)\r\n    handleAuthError();\r\n    // alert('Lakukan login terlebih dulu') \r\n  }\r\n};\r\n\r\n// Fungsi untuk mengganti halaman\r\nconst changePage = (page) => {\r\n  if (page >= 1 && page <= totalPages.value) {\r\n    currentPage.value = page;\r\n    fetchUserData(); // Refresh data untuk halaman baru\r\n  }\r\n};\r\n\r\nconst onRoleSelect = (selectedRole) => {\r\n  selectedRole.value = selectedRole; // Perbarui nilai terpilih \r\n};\r\n\r\nconst fetchUserRole = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/user/getUsersRole', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    }); \r\n    userRole.value = [...new Set(response.data)];\r\n  } catch (error) {\r\n    console.error('Error fetching role:', error);\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\n// function maskPassword(password) {\r\n//   if (!password) return ''; // Handle empty or undefined passwords\r\n//   return '●'.repeat(12); // Replace with 8 bullet points or adjust length\r\n// }\r\n\r\n\r\nconst exportUserData = async () => {\r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/user/export\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: { \r\n        fullname: filterFullname.value,\r\n        username: filterUsername.value,\r\n        role: selectedRole.value.join(','),\r\n        search: globalSearch.value,\r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n       },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"data_user.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error exporting data:\", error);\r\n    // alert(\"Gagal mengekspor data. Silakan coba lagi.\");\r\n    titleMessage.value = `Gagal Ekspor`;\r\n    alertMessage.value = `Gagal mengekspor data. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst uploadFileUserData = async () => {\r\n  const fileInput = document.getElementById('upload-file');\r\n  const file = fileInput.files[0];\r\n\r\n  if (!file) {\r\n    titleMessage.value = `Pilih File`;\r\n    alertMessage.value = 'Silakan pilih file sebelum mengunggah.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  try {\r\n    const response = await axios.post('http://localhost:3000/api/user/mass-upload', formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n    titleMessage.value = `Berhasil`;\r\n    alertMessage.value = `Upload berhasil, ${response.data.successCount} data user berhasil terupload`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n \r\n    fetchUserData();\r\n  } catch (error) {\r\n    console.error('Gagal mengunggah file:', error);\r\n    titleMessage.value = `Gagal Upload`;\r\n    alertMessage.value = 'Gagal mengunggah file. Pastikan format file benar.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst downloadTemplateUserData = async () => { \r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/user/template/\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"template_data_user.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error downloading template:\", error);\r\n    // alert(\"Gagal mendownload template. Silakan coba lagi.\");\r\n    titleMessage.value = `Gagal Download`;\r\n    alertMessage.value = `Gagal mendownload template. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n}\r\n\r\nconst confirmDelete = async () => {\r\n  try {\r\n    console.log('Id deleted:', selectedUser.value.user_id)\r\n    await axios.delete(`http://localhost:3000/api/user/${selectedUser.value.user_id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n    // alert('Daca User berhasil dihapus.') \r\n    titleMessage.value = `Berhasil Hapus`;\r\n    alertMessage.value = `Data User <strong>${selectedUser.value.username}</strong> berhasil dihapus.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show(); \r\n    // deleteModalInstance.hide() // Sembunyikan modal setelah penghapusan\r\n\r\n    // Refresh data setelah penghapusan\r\n    fetchUserData()\r\n  } catch (error) {\r\n    console.error('Failed to delete user data:', error) \r\n    handleAuthError();\r\n    // alert('Lakukan login terlebih dulu') \r\n  }\r\n}\r\n\r\nconst handleAuthError = () => {\r\n  // router.push({ name: 'auth.login' });\r\n  titleMessage.value = `Koneksi Gagal`;\r\n  alertMessage.value = `Cek koneksi internet Anda.`;\r\n  const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n  modal.show();\r\n};\r\n\r\nconst optionsRole = [\r\n  { value: null, text: 'Silahkan pilih role karyawan' },\r\n  { value: 'Admin', text: 'Admin' },\r\n  { value: 'Manajer Teknis', text: 'Manajer Teknis' },\r\n  { value: 'Petugas Lapangan', text: 'Petugas Lapangan' }, \r\n]\r\n\r\n// const handleDelete = async (rowData) => {\r\n//   const confirmDelete = confirm(`Are you sure you want to delete user ${rowData.fullname}?`)\r\n//   if (!confirmDelete) return\r\n//   console.log('Delete data:', rowData.user_id)\r\n//   try {\r\n//     await axios.delete(`http://localhost:3000/api/user/${rowData.user_id}`)\r\n//     alert('User data deleted successfully.')\r\n\r\n//     // Refresh data setelah penghapusan\r\n//     fetchUserData()\r\n//   } catch (error) {\r\n//     console.error('Failed to delete user data:', error)\r\n//     alert('Failed to delete user data.')\r\n//   }\r\n// }\r\n\r\n// Fungsi untuk menghapus user\r\n// const deleteUser = async (rowData) => {\r\n//   console.log('Edit data:', rowData.user_id)\r\n//   if (confirm('Are you sure you want to delete this user?')) {\r\n//     try {\r\n//       await axios.delete(`http://localhost:3000/api/user/${rowData.user_id}`);\r\n//       await fetchUserData(); // Refresh data setelah penghapusan\r\n//     } catch (error) {\r\n//       console.error('Error deleting user:', error);\r\n//     }\r\n//   }\r\n// };\r\n</script>\r\n","import script from \"./ListUser.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListUser.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListUser.vue?vue&type=style&index=0&id=76e69d9c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-76e69d9c\"]])\n\nexport default __exports__"],"names":["titleMessage","ref","alertMessage","filterFullname","filterUsername","globalSearch","currentPage","totalPages","pageSize","totalData","token","localStorage","getItem","columns","title","data","sortable","userData","userRole","selectedRole","isEditMode","editForm","user_id","employee_id","username","password","role","resetForm","value","selectedUser","showDeleteModal","rowData","showEditModal","showAddModal","submitUser","async","console","log","response","axios","put","headers","Authorization","fetchUserData","post","error","handleAuthError","onMounted","fetchUserRole","fetchEmployees","currentSort","column","order","onSort","employees","get","rows","params","fullname","join","search","order_by","order_direction","page","map","user","employee","sp","rowCount","Math","ceil","changePage","onRoleSelect","Set","exportUserData","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","modal","BootstrapModal","getElementById","show","uploadFileUserData","fileInput","file","files","formData","FormData","append","successCount","downloadTemplateUserData","confirmDelete","delete","optionsRole","text","__exports__"],"sourceRoot":""}