"use strict";(self["webpackChunkhopeui_vue"]=self["webpackChunkhopeui_vue"]||[]).push([[3496],{68904:function(a,e,t){t.d(e,{A:function(){return k}});var l=t(56768),o=t(24232);const s={class:"modal fade",id:"message-alert",tabindex:"-1","aria-labelledby":"deleteConfirmationLabel","aria-hidden":"true"},i={class:"modal-dialog"},n={class:"modal-content"},d={class:"modal-header"},r={class:"modal-title",id:"deleteConfirmationLabel"},c={class:"modal-body"},u=["innerHTML"];function m(a,e,t,m,b,v){return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",i,[(0,l.Lk)("div",n,[(0,l.Lk)("div",d,[(0,l.Lk)("h5",r,(0,o.v_)(""==t.title?"Alert Dialog":t.title),1),e[0]||(e[0]=(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,l.Lk)("div",c,[(0,l.Lk)("p",{innerHTML:t.message},null,8,u)]),e[1]||(e[1]=(0,l.Lk)("div",{class:"modal-footer"},[(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Tutup")],-1))])])])}var b={name:"MessageModal",props:{title:{type:String,required:!1},message:{type:String,required:!0}}},v=t(71241);const p=(0,v.A)(b,[["render",m]]);var k=p},53496:function(a,e,t){t.r(e),t.d(e,{default:function(){return q}});t(44114),t(14603),t(47566),t(98721);var l=t(56768),o=t(45130),s=t(24232),i=t(90144),n=t(94373),d=t(57363),r=t(68904),c=t(48077);const u={class:"row"},m={class:"col-sm-12"},b={class:"card"},v={class:"card-body"},p={class:"row mb-2"},k={class:"col-sm-6"},h={class:"input-group has-validation"},g={class:"row mb-2"},L={class:"col-sm-6 pagination-show-entries"},_={class:"table-responsive border-bottom"},y={class:"pagination-container"},f={class:"text-muted"},w={"aria-label":"Page navigation example"},C={class:"pagination justify-content-end"},A=["onClick"],x={class:"modal-dialog"},K={class:"modal-content"},E={class:"modal-header"},B={class:"modal-title",id:"staticBackdropPermissionLabel"},F={class:"modal-body"},R={class:"mb-3"},S=["data-bs-dismiss"],U={class:"modal fade",id:"delete-confirmation",tabindex:"-1","aria-labelledby":"deleteConfirmationLabel","aria-hidden":"true"},I={class:"modal-dialog"},D={class:"modal-content"},$={class:"modal-body"},P={class:"modal fade",id:"mass-upload-modal",tabindex:"-1","aria-labelledby":"massUploadModalLabel","aria-hidden":"true"},T={class:"modal-dialog"},z={class:"modal-content"},G={class:"modal-body"},M={class:"mb-3"},j={type:"file",id:"upload-file",ref:"fileInput",accept:".xlsx, .csv",required:"",class:"form-control"};var H={__name:"ListToolCondition",setup(a){const e=(0,i.KR)(""),t=(0,i.KR)(""),H=localStorage.getItem("access_token"),N=(0,i.KR)([]),W=(0,i.KR)(""),q=(0,i.KR)(""),V=(0,i.KR)(1),X=(0,i.KR)(0),J=(0,i.KR)(10),O=(0,i.KR)(0),Q=[{title:"Nama Kondisi Alat",data:"tool_condition_name",sortable:!0},{title:"Aksi",data:"actions",sortable:!1}];(0,l.sV)((async()=>{await aa()}));const Y=(0,i.KR)({column:"tool_condition_id",order:"DESC"}),Z=({column:a,order:e})=>{Y.value={column:a,order:e},aa()},aa=async()=>{try{const a=await n.A.get("http://localhost:3000/api/asset_tool_condition",{headers:{Authorization:`Bearer ${H}`},params:{tool_condition_name:W.value,search:q.value,order_by:Y.value.column,order_direction:Y.value.order,page:V.value,pageSize:J.value}});N.value=a.data.rows,O.value=a.data.sp.rowCount,X.value=Math.ceil(a.data.sp.rowCount/J.value)}catch(a){console.error("Error fetching tool condition data:",a),va()}},ea=a=>{a>=1&&a<=X.value&&(V.value=a,aa())},ta=(0,i.KR)(!1),la=(0,i.KR)({tool_condition_id:null,tool_condition_name:""}),oa=()=>{la.value={tool_condition_id:null,tool_condition_name:""}},sa=async()=>{try{const a=await n.A.get("http://localhost:3000/api/asset_tool_condition/export",{headers:{Authorization:`Bearer ${H}`},params:{tool_condition_name:W.value,search:q.value,order_by:Y.value.column,order_direction:Y.value.order},responseType:"blob"}),e=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a");t.href=e,t.setAttribute("download","data_kondisi_alat.xlsx"),document.body.appendChild(t),t.click(),t.parentNode.removeChild(t)}catch(a){console.error("Error exporting data:",a),e.value="Gagal Ekspor",t.value="Gagal mengekspor data. Silakan coba lagi.";const l=new c.aF(document.getElementById("message-alert"));l.show()}},ia=async()=>{const a=document.getElementById("upload-file"),l=a.files[0];if(!l){e.value="Pilih File",t.value="Silakan pilih file sebelum mengunggah.";const a=new c.aF(document.getElementById("message-alert"));return void a.show()}const o=new FormData;o.append("file",l);try{const a=await n.A.post("http://localhost:3000/api/asset_tool_condition/mass-upload",o,{headers:{Authorization:`Bearer ${H}`,"Content-Type":"multipart/form-data"}});e.value="Berhasil",t.value=`Upload berhasil, ${a.data.successCount} data kondisi alat berhasil terupload`;const l=new c.aF(document.getElementById("message-alert"));l.show(),aa()}catch(s){console.error("Gagal mengunggah file:",s),e.value="Gagal Upload",t.value="Gagal mengunggah file. Pastikan format file benar.";const a=new c.aF(document.getElementById("message-alert"));a.show()}},na=async()=>{try{const a=await n.A.get("http://localhost:3000/api/asset_tool_condition/template/",{headers:{Authorization:`Bearer ${H}`},responseType:"blob"}),e=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a");t.href=e,t.setAttribute("download","template_data_kondisi_alat.xlsx"),document.body.appendChild(t),t.click(),t.parentNode.removeChild(t)}catch(a){console.error("Error downloading template:",a),e.value="Gagal Download",t.value="Gagal mendownload template. Silakan coba lagi.";const l=new c.aF(document.getElementById("message-alert"));l.show()}},da=()=>{oa(),ta.value=!1},ra=a=>{ua.value=a,la.value={...a},ta.value=!0},ca=async()=>{console.log("Edit data submitted:",la.value);try{if(ta.value){const a=await n.A.put(`http://localhost:3000/api/asset_tool_condition/${la.value.tool_condition_id}`,la.value,{headers:{Authorization:`Bearer ${H}`}});console.log("Data berhasil diupdate:",a.data);const e=N.value.findIndex((a=>a.tool_condition_id===la.value.tool_condition_id));-1!==e&&(N.value[e]={...la.value})}else{const a=await n.A.post("http://localhost:3000/api/asset_tool_condition",la.value,{headers:{Authorization:`Bearer ${H}`}});console.log("Data berhasil ditambahkan:",a.data),N.value.push(a.data),aa()}}catch(a){console.error("Gagal mengupdate data:",a),va()}},ua=(0,i.KR)(null),ma=a=>{ua.value=a},ba=async()=>{try{console.log("Id deleted:",ua.value.tool_condition_id),await n.A.delete(`http://localhost:3000/api/asset_tool_condition/${ua.value.tool_condition_id}`,{headers:{Authorization:`Bearer ${H}`}}),e.value="Berhasil Hapus",t.value=`Data Kondisi Alat <strong>${ua.value.tool_condition_name}</strong> berhasil dihapus.`;const a=new c.aF(document.getElementById("message-alert"));a.show(),aa()}catch(a){console.error("Failed to delete tool condition data:",a),va()}},va=()=>{e.value="Koneksi Gagal",t.value="Cek koneksi internet Anda.";const a=new c.aF(document.getElementById("message-alert"));a.show()};return(a,i)=>((0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("div",m,[(0,l.Lk)("div",b,[(0,l.Lk)("div",{class:"card-header d-flex justify-content-between"},[i[6]||(i[6]=(0,l.Lk)("div",{class:"header-title"},[(0,l.Lk)("h4",{class:"card-title"},"List Kondisi Alat")],-1)),(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"btn btn-success",style:{"margin-right":"10px"},onClick:da,"data-bs-toggle":"modal","data-bs-target":"#form-confirmation"}," Tambah Kondisi Alat "),(0,l.Lk)("button",{class:"btn btn-outline-success",style:{"margin-right":"10px"},onClick:sa}," Ekspor Data "),i[5]||(i[5]=(0,l.Lk)("button",{class:"btn btn-info",style:{"margin-right":"10px"},"data-bs-toggle":"modal","data-bs-target":"#mass-upload-modal"}," Mass Upload ",-1)),(0,l.Lk)("button",{class:"btn btn-outline-info",onClick:na}," Download Template ")])]),(0,l.Lk)("div",v,[(0,l.Lk)("div",p,[(0,l.Lk)("div",k,[i[7]||(i[7]=(0,l.Lk)("label",{for:"validationCustomUsername01",class:"form-label"},"Filter nama kondisi alat ",-1)),(0,l.Lk)("div",h,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=a=>W.value=a),class:"form-control filter-style",id:"validationCustomUsername01","aria-describedby":"inputGroupPrepend"},null,512),[[o.Jo,W.value]])])]),(0,l.Lk)("div",{class:"col-sm-4"},[i[8]||(i[8]=(0,l.Lk)("label",{for:"validationCustomUsername01",class:"form-label text-white"},"I",-1)),(0,l.Lk)("div",{class:"input-group has-validation"},[(0,l.Lk)("button",{class:"btn btn-primary width-button-style filter-style",onClick:aa,title:"Search"}," Filter ")])])]),(0,l.Lk)("div",g,[(0,l.Lk)("div",L,[i[10]||(i[10]=(0,l.Lk)("label",{for:"entries",class:"form-label col-sm-3"},"Show entries",-1)),(0,l.bo)((0,l.Lk)("select",{id:"entries",class:"form-select show-entries","onUpdate:modelValue":i[1]||(i[1]=a=>J.value=a),onChange:aa},i[9]||(i[9]=[(0,l.Lk)("option",{value:"10"},"10",-1),(0,l.Lk)("option",{value:"25"},"25",-1),(0,l.Lk)("option",{value:"50"},"50",-1),(0,l.Lk)("option",{value:"100"},"100",-1)]),544),[[o.u1,J.value]])])]),(0,l.Lk)("div",_,[(0,l.bF)(d.A,{data:N.value,columns:Q,currentPage:V.value,pageSize:J.value,idrow:a.tool_condition_id,onEdit:ra,onDelete:ma,onSort:Z},null,8,["data","currentPage","pageSize","idrow"]),(0,l.Lk)("div",y,[(0,l.Lk)("p",f," Showing "+(0,s.v_)((V.value-1)*J.value+1)+" to "+(0,s.v_)(Math.min(V.value*J.value,O.value))+" of "+(0,s.v_)(O.value)+" entries ",1),(0,l.Lk)("nav",w,[(0,l.Lk)("ul",C,[(0,l.Lk)("li",{class:(0,s.C4)(["page-item",{disabled:1===V.value}])},[(0,l.Lk)("button",{class:"page-link",onClick:i[2]||(i[2]=a=>ea(V.value-1))},"Previous")],2),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(X.value,(a=>((0,l.uX)(),(0,l.CE)("li",{class:(0,s.C4)(["page-item",{active:V.value===a}]),key:a},[(0,l.Lk)("button",{class:"page-link",onClick:e=>ea(a)},(0,s.v_)(a),9,A)],2)))),128)),(0,l.Lk)("li",{class:(0,s.C4)(["page-item",{disabled:V.value===X.value}])},[(0,l.Lk)("button",{class:"page-link",onClick:i[3]||(i[3]=a=>ea(V.value+1))},"Next")],2)])])]),(0,l.Lk)("div",{class:"modal fade",id:"form-confirmation","data-bs-backdrop":"static","data-bs-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropPermissionLabel","aria-hidden":"true",onHide:oa},[(0,l.Lk)("div",x,[(0,l.Lk)("div",K,[(0,l.Lk)("div",E,[(0,l.Lk)("h5",B,(0,s.v_)(ta.value?"Perbarui Kondisi Alat":"Tambah Kondisi Alat"),1),i[11]||(i[11]=(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,l.Lk)("div",F,[i[13]||(i[13]=(0,l.Lk)("p",null,[(0,l.eW)("Form yang bertanda "),(0,l.Lk)("span",{class:"text-primary"},"*"),(0,l.eW)(" wajib diisi")],-1)),(0,l.Lk)("form",{onSubmit:(0,o.D$)(ca,["prevent"])},[(0,l.Lk)("div",R,[i[12]||(i[12]=(0,l.Lk)("label",{for:"tool_condition_name",class:"form-label"},[(0,l.eW)("Nama Kondisi Alat"),(0,l.Lk)("span",{class:"text-primary"},"*")],-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":i[4]||(i[4]=a=>la.value.tool_condition_name=a),maxlength:"100",id:"tool_condition_name",type:"text",required:"",class:"form-control"},null,512),[[o.Jo,la.value.tool_condition_name]])]),(0,l.Lk)("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":la.value.tool_condition_name?"modal":null},(0,s.v_)(ta.value?"Simpan Perubahan":"Tambahkan Kondisi Alat"),9,S)],32)])])])],32),(0,l.Lk)("div",U,[(0,l.Lk)("div",I,[(0,l.Lk)("div",D,[i[17]||(i[17]=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h5",{class:"modal-title",id:"deleteConfirmationLabel"},"Konfirmasi Hapus"),(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,l.Lk)("div",$,[(0,l.Lk)("p",null,[i[14]||(i[14]=(0,l.eW)("Apa kamu yakin ingin menghapus data Kondisi Alat ")),(0,l.Lk)("strong",null,(0,s.v_)(ua.value?.tool_condition_name),1),i[15]||(i[15]=(0,l.eW)("?"))])]),(0,l.Lk)("div",{class:"modal-footer"},[i[16]||(i[16]=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,l.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:ba},"Delete")])])])]),(0,l.Lk)("div",P,[(0,l.Lk)("div",T,[(0,l.Lk)("div",z,[i[20]||(i[20]=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h5",{class:"modal-title",id:"massUploadModalLabel"},"Mass Upload Kondisi Alat"),(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,l.Lk)("div",G,[(0,l.Lk)("form",{onSubmit:(0,o.D$)(ia,["prevent"])},[(0,l.Lk)("div",M,[i[18]||(i[18]=(0,l.Lk)("label",{for:"upload-file",class:"form-label"},"Pilih File",-1)),(0,l.Lk)("input",j,null,512)]),i[19]||(i[19]=(0,l.Lk)("button",{type:"submit",class:"btn btn-primary"},"Upload",-1))],32)])])])]),(0,l.bF)(r.A,{message:t.value,title:e.value},null,8,["message","title"])])])])])]))}},N=t(71241);const W=(0,N.A)(H,[["__scopeId","data-v-0319c158"]]);var q=W}}]);