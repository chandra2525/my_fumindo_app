{"version":3,"file":"js/5197.453e5276.js","mappings":"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","sources":["webpack://hopeui-vue/./src/views/tables/ListCabang.vue","webpack://hopeui-vue/./src/views/tables/ListCabang.vue?e9ac"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-sm-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header d-flex justify-content-between\">\r\n          <div class=\"header-title\">\r\n            <h4 class=\"card-title\">List Cabang</h4>\r\n          </div> \r\n          <div >\r\n            <button \r\n              class=\"btn btn-success\" \r\n              style=\"margin-right: 10px;\" \r\n              @click=\"showAddModal\" \r\n              data-bs-toggle=\"modal\" \r\n              data-bs-target=\"#form-confirmation\">\r\n              Tambah Cabang\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-success\" \r\n              style=\"margin-right: 10px;\" \r\n              @click=\"exportBranchData\">\r\n              Ekspor Data\r\n            </button>\r\n            <button\r\n              class=\"btn btn-info\"\r\n              style=\"margin-right: 10px;\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#mass-upload-modal\">\r\n              Mass Upload\r\n            </button>\r\n            <button \r\n              class=\"btn btn-outline-info\" \r\n              @click=\"downloadTemplateBranchData\">\r\n              Download Template\r\n            </button>\r\n            <!-- <button class=\"btn btn-info btn-sm\" @click=\"downloadTemplateBranchData\">Download Template</button> -->\r\n          </div>\r\n        </div>\r\n        <!-- <div>\r\n          <label for=\"filter\">Filter by Branch Name:</label>\r\n          <input type=\"text\" id=\"filter\" v-model=\"filter\" @input=\"fetchBranchData\" />\r\n        </div> -->\r\n        <div class=\"card-body\">\r\n          <!-- <div>\r\n            <label for=\"filter\">Filter by Branch Name:</label>\r\n            <select id=\"filter\" v-model=\"filter\" @change=\"fetchBranchData\" class=\"form-select\">\r\n              <option value=\"\">-- Select Branch Name --</option>\r\n              <option v-for=\"name in branchNames\" :key=\"name\" :value=\"name\">\r\n                {{ name }}\r\n              </option>\r\n            </select>\r\n          </div> -->\r\n          <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\">\r\n              <label for=\"filter\" class=\"form-label\">Filter nama cabang</label>\r\n              <!-- <v-select :options=\"branchNames\" v-model=\"selectedBranches\" multiple @input=\"fetchBranchData\" ></v-select> -->\r\n              <v-select \r\n                :options=\"branchNames\" \r\n                v-model=\"selectedBranches\" \r\n                multiple  \r\n                @update:modelValue=\"onBranchSelect\" \r\n                class=\"filter-style\"\r\n              ></v-select>\r\n            </div>\r\n            <!-- <div class=\"col-sm-4\">\r\n              <label for=\"filter\" class=\"mb-2\">Filter Alamat:</label>\r\n              <input\r\n                type=\"text\"\r\n                v-model=\"filterAddress\" \r\n                class=\"mb-4 form-control filter-style\"\r\n              />\r\n              <button\r\n                class=\"btn btn-primary filter-style\"\r\n                @click=\"fetchBranchData\"\r\n                title=\"Search\">\r\n                <svg width=\"18\" height=\"19\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M17 17.124L12.0962 12.2202M12.0962 12.2202C13.2725 11.0439 14 9.41895 14 7.62402C14 4.03417 11.0899 1.12402 7.5 1.12402C3.91015 1.12402 1 4.03417 1 7.62402C1 11.2139 3.91015 14.124 7.5 14.124C9.29493 14.124 10.9199 13.3965 12.0962 12.2202Z\" stroke=\"#FFFFFF\" stroke-width=\"1.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                  </svg>\r\n              </button>\r\n            </div> -->\r\n            <div class=\"col-sm-6\">\r\n            <!-- <b-col md=\"4\"> -->\r\n              <label for=\"validationCustomUsername01\" class=\"form-label\">Filter alamat</label>\r\n              <div class=\"input-group has-validation\">\r\n                <input type=\"text\" v-model=\"filterAddress\" class=\"form-control filter-style\" id=\"validationCustomUsername01\" aria-describedby=\"inputGroupPrepend\"/>\r\n              </div>\r\n            <!-- </b-col> -->\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row mb-4\">\r\n            <div class=\"col-sm-6\">\r\n              <!-- Input Pencarian Global -->\r\n              <div class=\"search-container\">\r\n                <label for=\"global-search\" class=\"form-label\">Pencarian</label>\r\n                <div class=\"input-group has-validation\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"global-search\"\r\n                    v-model=\"globalSearch\" \r\n                    class=\"form-control filter-style\" \r\n                  />\r\n                  <!-- <button\r\n                    class=\"btn btn-primary filter-style\"\r\n                    @click=\"fetchBranchData\"\r\n                    title=\"Search\">\r\n                    <svg width=\"18\" height=\"19\" viewBox=\"0 0 23 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path d=\"M17 17.124L12.0962 12.2202M12.0962 12.2202C13.2725 11.0439 14 9.41895 14 7.62402C14 4.03417 11.0899 1.12402 7.5 1.12402C3.91015 1.12402 1 4.03417 1 7.62402C1 11.2139 3.91015 14.124 7.5 14.124C9.29493 14.124 10.9199 13.3965 12.0962 12.2202Z\" stroke=\"#FFFFFF\" stroke-width=\"1.8\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                  </button> -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-sm-4\">\r\n              <label for=\"validationCustomUsername01\" class=\"form-label text-white\">I</label>\r\n              <div class=\"input-group has-validation\">\r\n                <button\r\n                  class=\"btn btn-primary width-button-style filter-style\" \r\n                  @click=\"fetchBranchData\"\r\n                  title=\"Search\">\r\n                  Filter\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n            <!-- <v-select\r\n              v-model=\"selectedBranches\"\r\n              :options=\"branchNames\"\r\n              multiple\r\n              label=\"branch_name\"\r\n              placeholder=\"Search and select branches\"\r\n              class=\"form-control\"\r\n              :reduce=\"branch => branch.branch_name\"\r\n              @input=\"fetchBranchData\"\r\n            >\r\n              <template #option=\"{ selected, option }\">\r\n                <div class=\"d-flex align-items-center\">\r\n                  <input type=\"checkbox\" :checked=\"selected\" />\r\n                  <span class=\"ms-2\">{{ option }}</span>\r\n                </div>\r\n              </template>\r\n            </v-select> -->\r\n          \r\n          <div class=\"row mb-2\">\r\n            <!-- Dropdown Show Entries -->\r\n            <div class=\"col-sm-6 pagination-show-entries\">\r\n              <label for=\"entries\" class=\"form-label col-sm-3\">Show entries</label>\r\n              <select\r\n                id=\"entries\"\r\n                class=\"form-select show-entries\"\r\n                v-model=\"pageSize\"\r\n                @change=\"fetchBranchData\"\r\n              >\r\n                <option value=\"10\">10</option>\r\n                <option value=\"25\">25</option>\r\n                <option value=\"50\">50</option>\r\n                <option value=\"100\">100</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"table-responsive border-bottom\">\r\n            <data-table\r\n              :data=\"branchData\"\r\n              :columns=\"branchColumns\" \r\n              :idrow=\"asset_id\"  \r\n              @edit=\"showEditModal\"\r\n              @delete=\"showDeleteModal\"\r\n              @sort=\"onSort\"\r\n            />\r\n\r\n            <div class=\"pagination-container\">\r\n              <p class=\"text-muted\">\r\n                Showing {{ (currentPage - 1) * pageSize + 1 }} to\r\n                {{ Math.min(currentPage * pageSize, totalData) }} of {{ totalData }} entries\r\n              </p>\r\n              <nav aria-label=\"Page navigation example\">\r\n                <ul class=\"pagination justify-content-end\">\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage - 1)\">Previous</button>\r\n                  </li>\r\n                  <li\r\n                    class=\"page-item\"\r\n                    v-for=\"page in totalPages\"\r\n                    :key=\"page\"\r\n                    :class=\"{ active: currentPage === page }\"\r\n                  >\r\n                    <button class=\"page-link\" @click=\"changePage(page)\">{{ page }}</button>\r\n                  </li>\r\n                  <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n                    <button class=\"page-link\" @click=\"changePage(currentPage + 1)\">Next</button>\r\n                  </li>\r\n                </ul>\r\n              </nav>\r\n            </div>\r\n\r\n            <!-- Pagination -->\r\n            <!-- <div class=\"pagination-container d-flex justify-content-between align-items-center mt-3\">\r\n              <span>Menampilkan {{ branchData.length }} dari {{ pagination.rowCount }} data</span>\r\n              <ul class=\"pagination mb-0\">\r\n                <li class=\"page-item\" :class=\"{ disabled: pagination.page === 1 }\">\r\n                  <button class=\"page-link\" @click=\"changePage(pagination.page - 1)\">Sebelumnya</button>\r\n                </li>\r\n                <li\r\n                  v-for=\"page in pagination.pageCount\"\r\n                  :key=\"page\"\r\n                  :class=\"{ active: pagination.page === page }\"\r\n                  class=\"page-item\"\r\n                >\r\n                  <button class=\"page-link\" @click=\"changePage(page)\">{{ page }}</button>\r\n                </li>\r\n                <li class=\"page-item\" :class=\"{ disabled: pagination.page === pagination.pageCount }\">\r\n                  <button class=\"page-link\" @click=\"changePage(pagination.page + 1)\">Berikutnya</button>\r\n                </li>\r\n              </ul>\r\n            </div> -->\r\n            \r\n            <div class=\"modal fade\" id=\"form-confirmation\" data-bs-backdrop=\"static\" data-bs-keyboard=\"true\" tabindex=\"-1\" aria-labelledby=\"staticBackdropPermissionLabel\" aria-hidden=\"true\" @hide=\"resetForm\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"staticBackdropPermissionLabel\">{{ isEditMode ? 'Perbarui Cabang' : 'Tambah Cabang' }}</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <p>Form yang bertanda <span class=\"text-primary\">*</span> wajib diisi</p> \r\n                    <form @submit.prevent=\"submitBranch\">\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"branch_name\" class=\"form-label\">Nama Cabang<span class=\"text-primary\">*</span></label>\r\n                        <input v-model=\"editForm.branch_name\" maxlength=\"100\" id=\"branch_name\" type=\"text\" required class=\"form-control\"/>\r\n                      </div>\r\n                      <div class=\"mb-3\"> \r\n                        <label for=\"address\" class=\"form-label\">Alamat<span class=\"text-primary\">*</span></label>\r\n                        <b-form-textarea v-model=\"editForm.address\" id=\"address\" type=\"text\" required rows=\"6\" max-rows=\"6\"></b-form-textarea>\r\n                      </div> \r\n                      <button type=\"submit\" class=\"btn btn-primary\" :data-bs-dismiss=\"editForm.branch_name&&editForm.address ? 'modal' : null\">{{ isEditMode ? 'Simpan Perubahan' : 'Tambahkan Cabang' }}</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal Konfirmasi Penghapusan -->\r\n            <div class=\"modal fade\" id=\"delete-confirmation\" tabindex=\"-1\" aria-labelledby=\"deleteConfirmationLabel\" aria-hidden=\"true\">\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"deleteConfirmationLabel\">Konfirmasi Hapus</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <p>Apa kamu yakin ingin menghapus data Cabang <strong>{{ selectedBranch?.branch_name }}</strong>?</p>\r\n                  </div>\r\n                  <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"confirmDelete\">Delete</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal for Mass Upload -->\r\n            <div\r\n              class=\"modal fade\"\r\n              id=\"mass-upload-modal\"\r\n              tabindex=\"-1\"\r\n              aria-labelledby=\"massUploadModalLabel\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"massUploadModalLabel\">Mass Upload Cabang</h5>\r\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                  </div>\r\n                  <div class=\"modal-body\">\r\n                    <form @submit.prevent=\"uploadFileBranchData\">\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"upload-file\" class=\"form-label\">Pilih File</label>\r\n                        <input\r\n                          type=\"file\"\r\n                          id=\"upload-file\"\r\n                          ref=\"fileInput\"\r\n                          accept=\".xlsx, .csv\"\r\n                          required\r\n                          class=\"form-control\"\r\n                        />\r\n                      </div>\r\n                      <button type=\"submit\" class=\"btn btn-primary\">Upload</button>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Modal Berhasil  Hapus  -->\r\n            <MessageModal :message=\"alertMessage\" :title=\"titleMessage\"/>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style scoped>\r\n  .filter-style {\r\n    /* max-width: 400px; */\r\n    height: 35px;\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .show-entries {\r\n    /* max-width: 400px; */\r\n    width: 95px;\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .width-button-style {\r\n    /* max-width: 400px; */\r\n    width: 85px;\r\n    font-size: 13px; /* Kecil */\r\n    /* margin-bottom: 1rem; */\r\n  }\r\n\r\n  .pagination-container {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n\r\n  .pagination-show-entries {\r\n    display: flex; \r\n    align-items: center;\r\n  }\r\n\r\n  /* .pagination-container {\r\n    margin-top: 20px;\r\n  }\r\n  .page-item.disabled .page-link {\r\n    cursor: not-allowed;\r\n  }\r\n  .page-item.active .page-link {\r\n    background-color: #007bff;\r\n    border-color: #007bff;\r\n    color: white;\r\n  } */\r\n</style>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport DataTable from '@/components/DataTable.vue';\r\n// import Actions from '@/components/TableActions.vue';\r\n// import { useRouter } from 'vue-router';\r\n// import { Modal } from 'bootstrap'\r\nimport MessageModal from '@/components/ModalAlert.vue'; \r\nimport { Modal as BootstrapModal } from 'bootstrap';\r\n// import \"vue-select/dist/vue-select.css\";\r\n// import \"vue-select/src/scss/vue-select.scss\";\r\n// import Vue from \"vue\";\r\nimport vSelect from 'vue-select';\r\nimport 'vue-select/dist/vue-select.css';\r\n\r\n// const router = useRouter();  \r\nconst titleMessage = ref('');\r\nconst alertMessage = ref('');\r\nconst token = localStorage.getItem('access_token');\r\n// Reactive data untuk menyimpan data cabang\r\nconst branchData = ref([]);\r\nconst branchNames = ref([]);\r\nconst selectedBranches = ref([]);\r\nconst filterAddress = ref('');\r\nconst globalSearch = ref('');\r\n\r\nconst currentPage = ref(1); // Halaman aktif\r\nconst totalPages = ref(0); // Total halaman\r\nconst pageSize = ref(10); // Banyaknya data per halaman\r\nconst totalData = ref(0); // Jumlah total data dari API\r\n\r\n// const pagination = ref({\r\n//   page: 1,       // Halaman saat ini\r\n//   pageSize: 10,  // Jumlah data per halaman\r\n//   pageCount: 0,  // Total halaman\r\n//   rowCount: 0,   // Total data\r\n// });\r\n\r\n// Definisikan kolom untuk DataTable, gunakan komponen Actions untuk kolom tindakan\r\nconst branchColumns = [\r\n  { title: 'ID', data: 'branch_id', sortable: true },\r\n  { title: 'Nama Cabang', data: 'branch_name', sortable: true },\r\n  { title: 'Alamat', data: 'address', sortable: true },\r\n  { title: 'Aksi', data: 'actions', sortable: false },\r\n];\r\n\r\n// Mengambil data branch saat komponen dimuat\r\nonMounted(async () => {\r\n  await fetchBranchNames();\r\n  await fetchBranchData();\r\n});\r\n\r\nconst currentSort = ref({ column: 'branch_id', order: 'DESC' });\r\n\r\nconst onSort = ({ column, order }) => {\r\n  currentSort.value = { column, order };\r\n  fetchBranchData(); // Panggil ulang API dengan parameter sorting\r\n};\r\n\r\nconst onBranchSelect = (selected) => {\r\n  selectedBranches.value = selected; // Perbarui nilai terpilih\r\n  // fetchBranchData(); // Panggil fungsi fetch dengan data terpilih\r\n};\r\n\r\n// Fungsi untuk mengambil data branch dari backend\r\nconst fetchBranchData = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/branch', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: { \r\n        branch_name: selectedBranches.value.join(','), \r\n        address: filterAddress.value,\r\n        search: globalSearch.value,\r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n        page: currentPage.value, // Kirim nomor halaman\r\n        pageSize: pageSize.value, // Kirim ukuran data per halaman\r\n        // order_by: 'branch_id', // Sorting berdasarkan ID\r\n        // order_direction: 'DESC', // Urutan descending\r\n       },\r\n      // params: { branch_name: selectedBranches.value.map(branch => branch.branch_name) },  \r\n    });\r\n    branchData.value = response.data.rows;// Asumsikan response berupa { data, total }\r\n    totalData.value = response.data.sp.rowCount;\r\n    totalPages.value = Math.ceil(response.data.sp.rowCount / pageSize.value);\r\n  } catch (error) {\r\n    console.error('Error fetching branch data:', error); \r\n    handleAuthError();\r\n  }\r\n};\r\n\r\nconst fetchBranchNames = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:3000/api/branch/filterBranchName', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    branchNames.value = response.data; // Simpan daftar nama cabang\r\n    //  branchNames.value = response.data.map(branch => ({\r\n    //   value: branch.branch_id, // Nilai yang digunakan\r\n    //   label: branch.branch_name, // Nama yang ditampilkan\r\n    // }));\r\n    // branchNames.value = response.data.map(branch => branch.branch_name); // Ambil nama cabang saja\r\n  } catch (error) {\r\n    console.error('Error fetching branch names:', error);\r\n    handleAuthError();\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengganti halaman\r\nconst changePage = (page) => {\r\n  if (page >= 1 && page <= totalPages.value) {\r\n    currentPage.value = page;\r\n    fetchBranchData(); // Refresh data untuk halaman baru\r\n  }\r\n};\r\n\r\n// const filter = ref('');\r\n// const isEditModalOpen = ref(false)\r\nconst isEditMode = ref(false)\r\n\r\nconst editForm = ref({\r\n  branch_id: null, \r\n  branch_name: '',\r\n  address: '', \r\n})\r\n\r\n// Fungsi untuk reset form saat modal ditutup\r\nconst resetForm = () => {\r\n  editForm.value = {\r\n    branch_id: null, \r\n    branch_name: '',\r\n    address: '',\r\n  }\r\n}\r\n\r\nconst exportBranchData = async () => {\r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/branch/export\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      params: { \r\n        branch_name: selectedBranches.value.join(','), \r\n        address: filterAddress.value,\r\n        search: globalSearch.value,\r\n        order_by: currentSort.value.column,\r\n        order_direction: currentSort.value.order,\r\n       },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"data_cabang.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error exporting data:\", error);\r\n    // alert(\"Gagal mengekspor data. Silakan coba lagi.\");\r\n    titleMessage.value = `Gagal Ekspor`;\r\n    alertMessage.value = `Gagal mengekspor data. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst uploadFileBranchData = async () => {\r\n  const fileInput = document.getElementById('upload-file');\r\n  const file = fileInput.files[0];\r\n\r\n  if (!file) {\r\n    titleMessage.value = `Pilih File`;\r\n    alertMessage.value = 'Silakan pilih file sebelum mengunggah.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  try {\r\n    const response = await axios.post('http://localhost:3000/api/branch/mass-upload', formData, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n    titleMessage.value = `Berhasil`;\r\n    alertMessage.value = `Upload berhasil, ${response.data.successCount} data cabang berhasil terupload`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n \r\n    fetchBranchData();\r\n  } catch (error) {\r\n    console.error('Gagal mengunggah file:', error);\r\n    titleMessage.value = `Gagal Upload`;\r\n    alertMessage.value = 'Gagal mengunggah file. Pastikan format file benar.';\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n};\r\n\r\nconst downloadTemplateBranchData = async () => { \r\n  try {\r\n    const response = await axios.get(\"http://localhost:3000/api/branch/template/\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      responseType: \"blob\", // Blob untuk file biner\r\n    });\r\n\r\n    // Buat URL dari blob\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n\r\n    // Buat link untuk download\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", \"template_data_cabang.xlsx\"); // Nama file\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Hapus elemen link setelah selesai\r\n    link.parentNode.removeChild(link);\r\n  } catch (error) {\r\n    console.error(\"Error downloading template:\", error);\r\n    // alert(\"Gagal mendownload template. Silakan coba lagi.\");\r\n    titleMessage.value = `Gagal Download`;\r\n    alertMessage.value = `Gagal mendownload template. Silakan coba lagi.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show();\r\n  }\r\n}\r\n\r\n// Fungsi untuk membuka modal tambah dengan form kosong\r\nconst showAddModal = () => {\r\n  resetForm() // Kosongkan form\r\n  isEditMode.value = false \r\n}\r\n\r\n// Fungsi untuk membuka modal edit dan mengisi form dengan data yang dipilih\r\nconst showEditModal = (rowData) => {\r\n  selectedBranch.value = rowData\r\n  editForm.value = { ...rowData }\r\n  isEditMode.value = true\r\n}\r\n\r\n// Fungsi untuk submit tambah/edit\r\nconst submitBranch = async () => {\r\n  console.log('Edit data submitted:', editForm.value)\r\n  try {\r\n    if (isEditMode.value) {\r\n      // Update data jika dalam mode edit\r\n      const response = await axios.put(`http://localhost:3000/api/branch/${editForm.value.branch_id}`, editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil diupdate:', response.data)\r\n\r\n      // Perbarui data branchData di tabel setelah update\r\n      const index = branchData.value.findIndex(branch => branch.branch_id === editForm.value.branch_id)\r\n      if (index !== -1) {\r\n        branchData.value[index] = { ...editForm.value }\r\n      }\r\n    } else {\r\n      // Tambahkan data baru jika dalam mode tambah\r\n      const response = await axios.post('http://localhost:3000/api/branch', editForm.value, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n      console.log('Data berhasil ditambahkan:', response.data)\r\n\r\n      // Tambahkan data baru ke tabel\r\n      branchData.value.push(response.data)\r\n    } \r\n  } catch (error) {\r\n    console.error('Gagal mengupdate data:', error);\r\n    handleAuthError();\r\n    // this.$router.push('/auth/login'); // Redirect ke halaman login\r\n  }\r\n}\r\n\r\n\r\nconst selectedBranch = ref(null) // Menyimpan data cabang yang dipilih untuk dihapus\r\n\r\n// Fungsi untuk menampilkan modal konfirmasi penghapusan\r\nconst showDeleteModal = (rowData) => {\r\n  selectedBranch.value = rowData\r\n}\r\n\r\nconst confirmDelete = async () => {\r\n  try {\r\n    console.log('Id deleted:', selectedBranch.value.branch_id)\r\n    await axios.delete(`http://localhost:3000/api/branch/${selectedBranch.value.branch_id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n    // alert('Data Cabang ' + selectedBranch.value.branch_name + ' bertasil dihapus.') \r\n    titleMessage.value = `Berhasil Hapus`;\r\n    alertMessage.value = `Data Cabang <strong>${selectedBranch.value.branch_name}</strong> berhasil dihapus.`;\r\n    const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n    modal.show(); \r\n    fetchBranchData()\r\n  } catch (error) {\r\n    console.error('Failed to delete branch data:', error) \r\n    handleAuthError();\r\n  }\r\n}\r\n\r\n// Fungsi untuk menangani kesalahan autentikasi\r\nconst handleAuthError = () => {\r\n  // router.push({ name: 'auth.login' });\r\n  titleMessage.value = `Koneksi Gagal`;\r\n  alertMessage.value = `Cek koneksi internet Anda.`;\r\n  const modal = new BootstrapModal(document.getElementById('message-alert'));\r\n  modal.show();\r\n};\r\n \r\n</script>\r\n","import script from \"./ListCabang.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListCabang.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListCabang.vue?vue&type=style&index=0&id=50909c06&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-50909c06\"]])\n\nexport default __exports__"],"names":["titleMessage","ref","alertMessage","token","localStorage","getItem","branchData","branchNames","selectedBranches","filterAddress","globalSearch","currentPage","totalPages","pageSize","totalData","branchColumns","title","data","sortable","onMounted","async","fetchBranchNames","fetchBranchData","currentSort","column","order","onSort","value","onBranchSelect","selected","response","axios","get","headers","Authorization","params","branch_name","join","address","search","order_by","order_direction","page","rows","sp","rowCount","Math","ceil","error","console","handleAuthError","changePage","isEditMode","editForm","branch_id","resetForm","exportBranchData","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","modal","BootstrapModal","getElementById","show","uploadFileBranchData","fileInput","file","files","formData","FormData","append","post","successCount","downloadTemplateBranchData","showAddModal","showEditModal","rowData","selectedBranch","submitBranch","log","put","index","findIndex","branch","push","showDeleteModal","confirmDelete","delete","__exports__"],"sourceRoot":""}